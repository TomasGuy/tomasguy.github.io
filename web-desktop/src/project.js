window.__require=function e(t,i,n){function a(r,s){if(!i[r]){if(!t[r]){var c=r.split("/");if(c=c[c.length-1],!t[c]){var l="function"==typeof __require&&__require;if(!s&&l)return l(c,!0);if(o)return o(c,!0);throw new Error("Cannot find module '"+r+"'")}r=c}var h=i[r]={exports:{}};t[r][0].call(h.exports,function(e){return a(t[r][1][e]||e)},h,h.exports,e,t,i,n)}return i[r].exports}for(var o="function"==typeof __require&&__require,r=0;r<n.length;r++)a(n[r]);return a}({AppleBreakAnim:[function(e,t,i){"use strict";cc._RF.push(t,"55465EOc5xBSpd0djt0Tjxg","AppleBreakAnim");var n=function(e){return e&&e.__esModule?e:{default:e}}(e("../Script/BaseCircleChild"));cc.Class({extends:n.default,properties:{appleType:1},onLoad:function(){switch(this._super(),this.appleType){case 1:this.linearVelocity=new cc.v2(-900,1500),this.angleDiff=-2;break;case 2:this.linearVelocity=new cc.v2(600,1e3),this.angleDiff=-1}},start:function(){},update:function(e){if(this.isBreakAnimPlaying){this.startPos||(this.startPos=this.node.convertToWorldSpaceAR(cc.Vec2.ZERO),this.time=0),this.time+=e;var t=this.linearVelocity.x*this.time,i=this.linearVelocity.y*this.time-4e3*this.time*this.time,n=new cc.v2(this.startPos.x+t,this.startPos.y+i);this.node.position=this.node.parent.convertToNodeSpaceAR(n),this.node.angle+=this.angleDiff}}}),cc._RF.pop()},{"../Script/BaseCircleChild":"BaseCircleChild"}],Apple:[function(e,t,i){"use strict";cc._RF.push(t,"9351e8sDL5P2KVAz3l7/p6x","Apple");var n=function(e){return e&&e.__esModule?e:{default:e}}(e("../Script/BaseCircleChild"));cc.Class({extends:n.default,properties:{coinValue:1},start:function(){}}),cc._RF.pop()},{"../Script/BaseCircleChild":"BaseCircleChild"}],BackgroundAdapter:[function(e,t,i){"use strict";cc._RF.push(t,"1c6a4exk3NMHII09FhZc5VU","BackgroundAdapter"),Object.defineProperty(i,"__esModule",{value:!0});var n=cc._decorator,a=n.ccclass,o=(n.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){var e=Math.min(cc.view.getCanvasSize().width/this.node.width,cc.view.getCanvasSize().height/this.node.height),t=this.node.width*e,i=this.node.height*e;this.node.scale=Math.max(cc.view.getCanvasSize().width/t,cc.view.getCanvasSize().height/i)},t=__decorate([a],t)}(cc.Component));i.default=o,cc._RF.pop()},{}],BaseCircleChild:[function(e,t,i){"use strict";cc._RF.push(t,"67faeOsKARNv7xu2PMW7fWv","BaseCircleChild"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.isBreakAnimPlaying=!1,this.linearVelocity=new cc.v2(Math.random()*Math.random()>.5?200:-200,1e3*Math.random())},start:function(){},update:function(e){if(this.isBreakAnimPlaying){this.startPos||(this.startPos=this.node.convertToWorldSpaceAR(cc.Vec2.ZERO),this.time=0),this.time+=e;var t=this.linearVelocity.x*this.time,i=this.linearVelocity.y*this.time-1600*this.time*this.time,n=new cc.v2(this.startPos.x+t,this.startPos.y+i);this.node.position=this.node.parent.convertToNodeSpaceAR(n)}}}),cc._RF.pop()},{}],BigNumUtil:[function(e,t,i){"use strict";cc._RF.push(t,"72631NVMpVM34O3GT7cbQrz","BigNumUtil"),t.exports={numAdd:function(e,t){for(var i=e.length-1,n=t.length-1,a=0,o=[];i>=0||n>=0||0!=a;){var r=(i>=0?e.charAt(i)-"0":0)+(n>=0?t.charAt(n)-"0":0)+a;o.push(r%10),a=Math.floor(r/10),i-=1,n-=1}return o.reverse().join("")},numMinus:function(e,t){var i=function(e){for(var t=0;t<e.length&&"0"===e.charAt(t);)t++;return e.slice(t)},n=[],a=0;for(e=i(e),t=i(t);e.length<t.length;)e="0"+e;for(;t.length<e.length;)t="0"+t;for(var o=e.length-1;o>=0;o--){var r=e.charAt(o)-0,s=t.charAt(o)-0;r-a>=s?(n.unshift(r-s-a),a=0):(n.unshift(r+10-s-a),a=1)}if(a){var c=subtract(t,e);return"-"+(c=i(c))}return(n=i(n=n.join("")))||"0"},formatNum:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e.length>6;)e=e.substr(0,e.length-3),t+=3;e.length>3&&(e=(Number(e)/1e3).toFixed(1),t+=3);var i="";switch(t){case 0:i="";break;case 3:i="k";break;case 6:i="m";break;case 9:i="b";break;case 12:i="t";break;default:if(t>=15){var n=(t-15)/3,a=Math.floor(n/26);switch(a){case 0:var o=String.fromCharCode("a".charCodeAt()+n-26*a);i=o+o;break;case 1:var r=String.fromCharCode("A".charCodeAt()+n-26*a);i=r+r;break;case 2:var s=String.fromCharCode("a".charCodeAt()+n-26*a);i=s+s+s;break;case 3:var c=String.fromCharCode("A".charCodeAt()+n-26*a);i=c+c+c;break;default:i=String.fromCharCode("a".charCodeAt()+n-26*a)+String(a)}}}return e+i},getMinPrice:function(e,t){var i=1,n=100;return t-4>1&&(i=t-4),n=i>=3?Math.pow(2,i-2)*(100+(e*e+9*e+8)/2):i>=2?100+(e*e+9*e+8)/2:0==e?100:100+(e*e+9*e+8)/2,Math.floor(.5*n)},getCurrentPrice:function(e,t){var i=1,n={lv:1,price:100};if(t-4>1&&(i=t-4),i>=3){var a=Math.random();a>=.7?(n.lv=i-2,n.price=Math.pow(2,i-2)*(100+(e*e+9*e+8)/2)):a>.1?(n.lv=i-1,n.price=Math.pow(2,i-1)*(100+(e*e+9*e+8)/2)):(n.lv=i,n.price=Math.pow(2,i)*(100+(e*e+9*e+8)/2))}else i>=2?Math.random()>.2?(n.lv=1,n.price=100+(e*e+9*e+8)/2):(n.lv=2,n.price=2*(100+(e*e+9*e+8)/2)):0==e?(n.lv=1,n.price=100):(n.lv=1,n.price=100+(e*e+9*e+8)/2);return n},getTargetPrice:function(e,t,i){var n=1;return t-4>1&&(n=t-4),n>=3?i<=n?i<=10?e*(10+35*i):e*(351*(360+i-10)):0:n>=2?1==i?100+10*e:2==i?100+15*e:0:1==i?100+10*e:0},getProduction:function(e){switch(e){case 0:return 0;case 1:return 5;case 2:return 10;case 3:return 20;case 4:return 40;default:return Math.round(2*Math.exp(.7495*e))}},getCurrentPriceByProduction:function(e,t){var i=1,n={lv:1,price:100};return t-4>1&&(i=t-4),i>=3?Math.random()>=.7?(n.lv=i-2,n.price=i-2<=10?e*(10+35*(i-2)):e*(351*(i-2+360-10))):Math.random()>.1?(n.lv=i-1,n.price=i-1<=10?e*(10+35*(i-1)):e*(351*(i-1+360-10))):(n.lv=i,n.price=i-2<=10?e*(10+35*i):e*(351*(360+i-10))):i>=2?Math.random()>.2?(n.lv=1,n.price=100+10*e):(n.lv=2,n.price=100+15*e):(n.lv=1,n.price=100+10*e),n},getMaxLvPrice:function(e,t){var i=1;return t-4>1&&(i=t-4),i>=3?Math.pow(2,i)*(100+(e*e+9*e+8)/2):i>=2?2*(100+(e*e+9*e+8)/2):0==e?100:100+(e*e+9*e+8)/2}},cc._RF.pop()},{}],BreakAnim:[function(e,t,i){"use strict";cc._RF.push(t,"bc8e0sSluxHP47KAREyGJMv","BreakAnim");var n=function(e){return e&&e.__esModule?e:{default:e}}(e("../Script/BaseCircleChild"));cc.Class({extends:n.default,properties:{maskType:1,circleSprite:cc.Sprite},onLoad:function(){switch(this._super(),this.maskType){case 1:this.linearVelocity=new cc.v2(-300,1e3),this.angleDiff=-2;break;case 2:this.linearVelocity=new cc.v2(-600,500),this.angleDiff=-1;break;case 3:this.linearVelocity=new cc.v2(300,1e3),this.angleDiff=-0;break;case 4:this.linearVelocity=new cc.v2(600,500),this.angleDiff=1}},start:function(){},initBreakDate:function(e){this.circleSprite.spriteFrame=e,this.node.position=new cc.v2(0,0),this.startPos=null},update:function(e){if(this.isBreakAnimPlaying){this.startPos||(this.startPos=this.node.convertToWorldSpaceAR(cc.Vec2.ZERO),this.time=0),this.time+=e;var t=this.linearVelocity.x*this.time,i=this.linearVelocity.y*this.time-1600*this.time*this.time,n=new cc.v2(this.startPos.x+t,this.startPos.y+i);this.node.position=this.node.parent.convertToNodeSpaceAR(n),this.node.angle+=this.angleDiff}}}),cc._RF.pop()},{"../Script/BaseCircleChild":"BaseCircleChild"}],Circle:[function(e,t,i){"use strict";cc._RF.push(t,"2d541b8+IJFPbX5IGYNqhRj","Circle"),cc.Class({extends:cc.Component,properties:{knifePrefab:cc.Prefab,applePrefab:cc.Prefab},start:function(){},initKnifeAndApple:function(e){this.stage=e,this.node.dir=1,this.node.speed=2,this.started=!1,this.node.angle=0;var t=this.node.children;for(var i in t)if(t.hasOwnProperty(i)){var n=t[i];"circle"!==n.name&&n.destroy()}for(var a=e;a>50;)a-=50;switch(a){case 2:case 3:this.addKnife(30),this.addKnife(330);break;case 4:case 8:case 26:case 33:case 45:this.addKnife(0),this.addKnife(120),this.addKnife(240);break;case 6:case 13:case 18:this.addKnife(0),this.addKnife(135),this.addKnife(180),this.addKnife(315);break;case 7:case 11:case 30:case 32:case 36:case 37:case 39:case 46:case 49:this.addKnife(135),this.addKnife(315);break;case 9:case 10:this.addKnife(30);break;case 12:this.addKnife(0),this.addKnife(270);break;case 15:for(var o=0;o<5;o++)this.addKnife(72*o);break;case 17:case 19:this.addKnife(0),this.addKnife(90),this.addKnife(270);break;case 21:case 41:this.addKnife(0),this.addKnife(90),this.addKnife(180),this.addKnife(270);break;case 23:case 24:this.addKnife(90),this.addKnife(180),this.addKnife(270);break;case 27:this.addKnife(150);break;case 28:case 48:this.addKnife(67.5),this.addKnife(112.5),this.addKnife(247.5),this.addKnife(292.5);break;case 31:this.addKnife(210);break;case 38:this.addKnife(135),this.addKnife(225);break;case 42:this.addKnife(135),this.addKnife(225),this.addKnife(315);break;case 44:for(var r=0;r<4;r++)this.addKnife(90*r+45);break;case 47:this.addKnife(0)}switch(a){case 3:case 39:this.addApple(0);break;case 5:for(var s=0;s<8;s++)this.addApple(45*s);break;case 8:case 26:for(var c=0;c<3;c++)this.addApple(120*c+60);break;case 10:for(var l=0;l<7;l++)this.addApple(30*l+120);break;case 12:case 19:case 47:for(var h=0;h<4;h++)this.addApple(90*h+45);break;case 15:for(var d=0;d<5;d++)this.addApple(72*d+36);break;case 20:for(var p=0;p<7;p++)this.addApple(30*p+90);break;case 25:for(var g=0;g<9;g++)this.addApple(40*g);break;case 28:for(var f=0;f<4;f++)this.addApple(90*f);break;case 30:this.addApple(30),this.addApple(60),this.addApple(90),this.addApple(240),this.addApple(270),this.addApple(300);break;case 40:this.addApple(50),this.addApple(70),this.addApple(90),this.addApple(180),this.addApple(200),this.addApple(260);break;case 45:this.addApple(40),this.addApple(60),this.addApple(80),this.addApple(160),this.addApple(180),this.addApple(200),this.addApple(280),this.addApple(300),this.addApple(320);break;case 46:this.addApple(90);break;case 50:this.addApple(15),this.addApple(170),this.addApple(190),this.addApple(210),this.addApple(290),this.addApple(310)}},addKnife:function(e){var t=cc.instantiate(this.knifePrefab);t.parent=this.node,t.group="PresetKnife",t.x=300*Math.sin((360-e)*Math.PI/180),t.y=300*Math.cos((360-e)*Math.PI/180),t.angle=e-180},addApple:function(e,t){var i=cc.instantiate(this.applePrefab);i.group="Apple",i.x=354*Math.sin((360-e)*Math.PI/180),i.y=354*Math.cos((360-e)*Math.PI/180),i.angle=e,i.parent=this.node},update:function(e){this.started||this.isPause||(this.speedWay=this.doMoveAction(this.stage),this.started=!0),this.speedWay&&!this.isPause&&(this.node.angleDiff=this.node.dir*this.node.speed,this.node.angle=(this.node.angle-this.node.angleDiff)%360)},pauseGame:function(){this.tween&&this.tween.stop(),this.isPause=!0},resumeGame:function(){this.tween&&this.tween.start(),this.isPause=!1},turnOnAnim:function(){this.isPause=!1},doMoveAction:function(e){for(var t=this,i=e;i>50;)i-=50;var n=!0;switch(i){case 1:case 2:case 10:case 12:case 21:case 26:case 29:case 41:case 42:case 46:this.tween=cc.tween(this.node).to(1,{speed:2}).repeatForever().start();break;case 3:case 11:case 22:case 27:this.node.speed=0;var a=cc.tween().to(2.1,{speed:3}),o=cc.tween().to(1.6,{speed:3}),r=cc.tween().to(2.1,{speed:0});this.tween=cc.tween(this.node).repeatForever(cc.tween().then(a).then(o).then(r)).start();break;case 4:this.node.speed=0;var s=cc.tween().to(.9,{speed:3}),c=cc.tween().to(.9,{speed:3}),l=cc.tween().to(.9,{speed:0});this.tween=cc.tween(this.node).repeatForever(cc.tween().then(s).then(c).then(l)).start();break;case 16:this.node.speed=0;var h=cc.tween().to(.9,{speed:4}),d=cc.tween().to(.9,{speed:4}),p=cc.tween().to(.9,{speed:0});this.tween=cc.tween(this.node).repeatForever(cc.tween().then(h).then(d).then(p)).start();break;case 5:case 13:case 23:this.node.speed=0;var g=cc.tween().to(.9,{speed:4}),f=cc.tween().to(.9,{speed:4}),u=cc.tween().to(.9,{speed:0});this.tween=cc.tween(this.node).repeatForever(cc.tween().then(g).then(f).then(u).call(function(){t.node.dir=-1*t.node.dir})).start();break;case 6:case 24:case 33:case 34:case 48:this.node.speed=0,this.node.dir=-1;var m=cc.tween().to(1.2,{speed:3},{easing:"cubicIn"}),v=cc.tween().to(2,{speed:3}),S=cc.tween().to(1.2,{speed:0},{easing:"cubicOut"}),y=cc.tween().to(.1,{speed:0});this.tween=cc.tween(this.node).repeatForever(cc.tween().then(m).then(v).then(S).then(y).call(function(){})).start();break;case 7:case 18:case 43:this.node.speed=0;var C=cc.tween().to(1,{speed:3},{easing:"quadIn"}),_=cc.tween().to(1,{speed:3}),k=cc.tween().to(1,{speed:0},{easing:"quadOut"}),M=cc.tween().to(.1,{speed:0});this.tween=cc.tween(this.node).repeatForever(cc.tween().then(C).then(_).then(k).then(M).call(function(){t.node.dir=-1*t.node.dir})).start();break;case 8:this.node.speed=0,this.node.dir=-1;var b=cc.tween().to(.9,{speed:3},{easing:"quartIn"}),w=cc.tween().to(1.8,{speed:3}),L=cc.tween().to(.9,{speed:0},{easing:"quartOut"});this.tween=cc.tween(this.node).repeatForever(cc.tween().then(b).then(w).then(L).call(function(){})).start();break;case 9:this.node.speed=0;var B=cc.tween().to(1.7,{speed:3},{easing:"sineInOut"}),I=cc.tween().to(1.7,{speed:0},{easing:"sineInOut"});this.tween=cc.tween(this.node).repeatForever(cc.tween().then(B).then(I).call(function(){})).start();break;case 14:case 17:case 19:case 28:n=!1;var N=cc.tween().by(1.2,{angle:90},{easing:"sineInOut"}),R=cc.tween().by(3.4,{angle:-180},{easing:"sineInOut"}),A=cc.tween().by(4.7,{angle:450},{easing:"sineInOut"}),K=cc.tween().by(1.2,{angle:-90},{easing:"sineInOut"}),P=cc.tween().by(3.4,{angle:180},{easing:"sineInOut"}),x=cc.tween().by(4.7,{angle:-450},{easing:"sineInOut"});this.tween=cc.tween(this.node).repeatForever(cc.tween().then(N).then(R).then(A).then(K).then(P).then(x).call(function(){})).start();break;case 15:this.node.speed=0;var D=cc.tween().to(1.3,{speed:6},{easing:"quadIn"}),T=cc.tween().to(1.5,{speed:6}),H=cc.tween().to(1.3,{speed:0},{easing:"quadOut"}),F=cc.tween().to(.1,{speed:0});this.tween=cc.tween(this.node).repeatForever(cc.tween().then(D).then(T).then(H).then(F).call(function(){})).start();break;case 20:case 25:case 40:case 50:n=!1;var U=cc.tween().by(.3,{angle:10},{easing:"sineInOut"}),O=cc.tween().by(.6,{angle:-30},{easing:"cubicOut"}),E=cc.tween().by(.6,{angle:30},{easing:"sineInOut"}),G=cc.tween().by(1.8,{angle:-120},{easing:"cubicOut"}),W=cc.tween().by(1.8,{angle:120},{easing:"sineInOut"}),z=cc.tween().by(3,{angle:-480},{easing:"cubicOut"});this.tween=cc.tween(this.node).repeatForever(cc.tween().then(U).then(O).then(E).then(G).then(W).then(z).call(function(){})).start();break;case 30:n=!1;var q=cc.tween().by(1,{angle:60},{easing:"sineInOut"}),V=cc.tween().by(3,{angle:-600},{easing:"sineInOut"});this.tween=cc.tween(this.node).repeatForever(cc.tween().then(q).then(V).call(function(){})).start();break;case 31:case 37:this.node.speed=0;var J=cc.tween().to(1.1,{speed:3}),j=cc.tween().to(.6,{speed:3}),Z=cc.tween().to(1.1,{speed:0});this.tween=cc.tween(this.node).repeatForever(cc.tween().then(J).then(j).then(Z)).start();break;case 32:this.node.speed=1;var X=cc.tween().to(2,{speed:2}),Q=cc.tween().to(2,{speed:1});this.tween=cc.tween(this.node).repeatForever(cc.tween().then(X).then(Q)).start();break;case 35:n=!1;var Y=cc.tween().by(2,{angle:120},{easing:"sineInOut"}),$=cc.tween().by(2.2,{angle:-180},{easing:"sineInOut"}),ee=cc.tween().by(2.2,{angle:270},{easing:"sineInOut"}),te=cc.tween().by(2.6,{angle:-360},{easing:"sineInOut"});this.tween=cc.tween(this.node).repeatForever(cc.tween().then(Y).then($).then(ee).then(te).call(function(){})).start();break;case 38:this.node.speed=0;var ie=cc.tween().to(3,{speed:2}),ne=cc.tween().to(3,{speed:0});this.tween=cc.tween(this.node).repeatForever(cc.tween().then(ie).then(ne)).start();break;case 39:case 49:this.node.speed=0;var ae=cc.tween().to(3,{speed:2}),oe=cc.tween().to(3,{speed:0});this.tween=cc.tween(this.node).repeatForever(cc.tween().then(ae).then(oe).call(function(){t.node.dir=-1*t.node.dir})).start();break;case 44:this.node.speed=0,this.node.dir=-1;var re=cc.tween().to(1.5,{speed:2.5},{easing:"quadInOut"}),se=cc.tween().to(1.5,{speed:0},{easing:"quadInOut"}),ce=cc.tween().to(.1,{speed:0});this.tween=cc.tween(this.node).repeatForever(cc.tween().then(re).then(se).then(ce).call(function(){})).start();break;case 45:n=!1;var le=cc.tween().by(.3,{angle:30},{easing:"cubicInOut"}),he=cc.tween().by(.3,{angle:30},{easing:"cubicInOut"}),de=cc.tween().by(3.6,{angle:-570},{easing:"cubicInOut"});this.tween=cc.tween(this.node).repeatForever(cc.tween().then(le).then(he).then(de).call(function(){})).start();break;case 47:n=!1;var pe=cc.tween().by(2,{angle:90},{easing:"sineInOut"}),ge=cc.tween().by(3.2,{angle:-180},{easing:"sineInOut"}),fe=cc.tween().by(4.2,{angle:270},{easing:"sineInOut"});this.tween=cc.tween(this.node).repeatForever(cc.tween().then(pe).then(ge).then(fe).call(function(){})).start()}return n}}),cc._RF.pop()},{}],CloseToBorderComponent:[function(e,t,i){"use strict";cc._RF.push(t,"aa46chc6GBJH5kkucLgAZDF","CloseToBorderComponent"),Object.defineProperty(i,"__esModule",{value:!0});var n=cc._decorator,a=n.ccclass,o=n.property,r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.closeToBottom=!1,t.marginBottomInPx=0,t}return __extends(t,e),t.prototype.onLoad=function(){this.closeToBottom&&(this.node.position=cc.v2(this.node.position.x,-this.node.parent.height/2+this.node.anchorY*this.node.height+this.marginBottomInPx))},__decorate([o({tooltip:"\u662f\u5426\u7d27\u8d34\u4e0b\u65b9\uff0c\u4e0d\u80fd\u548c\u7d27\u8d34\u4e0a\u65b9\u540c\u65f6\u4f7f\u7528"})],t.prototype,"closeToBottom",void 0),__decorate([o({tooltip:"\u8ddd\u79bb\u4e0b\u65b9\u7684\u8ddd\u79bb\uff08px\uff09\uff0c\u5f00\u542f\u7d27\u8d34\u4e0b\u65b9\u65f6\u4f7f\u7528"})],t.prototype,"marginBottomInPx",void 0),t=__decorate([a],t)}(cc.Component);i.default=r,cc._RF.pop()},{}],CommonUtil:[function(e,t,i){"use strict";cc._RF.push(t,"60b3axuBexB9rMER6ye5jHE","CommonUtil"),t.exports={runDialogAnim:function(e){e.scale=0,e.zIndex=100,e.active=!0;var t=cc.tween().to(.2,{scale:1.1},{easing:"quartOut"}),i=cc.tween().to(.1,{scale:1});cc.tween(e).then(t).then(i).start()},showVideoAd:function(e,t,i,n){var a=wx.createRewardedVideoAd({adUnitId:e});a.onError(function e(t){console.log("videoAd onError",t),i&&(i(),a.offError(e))}),a.onLoad(function e(t){console.log("videoAd onLoad",t),a.offLoad(e)}),a.onClose(function e(i){console.log("videoAd onClose",i),1==i.isEnded?t&&t():n&&n(),a.offClose(e)}),a.show().then(function(){console.log("\u6fc0\u52b1\u89c6\u9891 \u5e7f\u544a\u663e\u793a\u6210\u529f")}).catch(function(e){console.log("\u6fc0\u52b1\u89c6\u9891 \u5e7f\u544a\u663e\u793a\u5931\u8d25"),a.load().then(function(){console.log("\u6fc0\u52b1\u89c6\u9891\u52a0\u8f7d\u6210\u529f"),a.show().then(function(){console.log("\u6fc0\u52b1\u89c6\u9891 \u5e7f\u544a\u663e\u793a\u6210\u529f")}).catch(function(e){console.log("\u6fc0\u52b1\u89c6\u9891 \u5e7f\u544a\u663e\u793a\u5931\u8d25"),i&&i()})}).catch(function(e){console.log("\u6fc0\u52b1\u89c6\u9891\u52a0\u8f7d\u5931\u8d25"),i&&i()})})},showBannerAd:function(e){return console.log("showBannerAd"),null},showGridAd:function(){var e=qq.createAppBox({adUnitId:"b40f7e177622e3c5766bbf344cc73ce3"});e.load().then(function(){e.show()})}},cc._RF.pop()},{}],ContentAdapter:[function(e,t,i){"use strict";cc._RF.push(t,"42b34VMVTdNDJpxTnwzhXau","ContentAdapter"),Object.defineProperty(i,"__esModule",{value:!0});var n=cc._decorator,a=n.ccclass,o=(n.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){cc.log("\u8c03\u6574\u524d"),cc.log("\u5c4f\u5e55\u5206\u8fa8\u7387: "+cc.view.getCanvasSize().width+" x "+cc.view.getCanvasSize().height),cc.log("\u89c6\u56fe\u7a97\u53e3\u53ef\u89c1\u533a\u57df\u5206\u8fa8\u7387: "+cc.view.getVisibleSize().width+" x "+cc.view.getVisibleSize().height),cc.log("\u89c6\u56fe\u4e2d\u8fb9\u6846\u5c3a\u5bf8: "+cc.view.getFrameSize().width+" x "+cc.view.getFrameSize().height),cc.log("\u8bbe\u5907\u6216\u6d4f\u89c8\u5668\u50cf\u7d20\u6bd4\u4f8b: "+cc.view.getDevicePixelRatio()),cc.log("\u8282\u70b9\u5bbd\u9ad8: "+this.node.width+" x "+this.node.height);var e=Math.min(cc.view.getCanvasSize().width/this.node.width,cc.view.getCanvasSize().height/this.node.height),t=this.node.width*e,i=this.node.height*e;this.node.width=this.node.width*(cc.view.getCanvasSize().width/t),this.node.height=this.node.height*(cc.view.getCanvasSize().height/i),cc.log("\u8282\u70b9\u5728SHOW_ALL\u6a21\u5f0f\u4e0b\u5c55\u793a\u7684\u5bbd\u9ad8: "+t+" x "+i),cc.log("\u8282\u70b9\u5728SHOW_ALL\u6a21\u5f0f\u4e0b\u5c55\u793a\u7684\u7f29\u653e: "+e),cc.log("\u8282\u70b9\u5728SHOW_ALL\u6a21\u5f0f\u4e0b\u505a\u5168\u5c4f\u5904\u7406\u540e\u7684\u5b9e\u9645\u5bbd\u9ad8\uff08"+cc.view.getCanvasSize().width+"x"+cc.view.getCanvasSize().height+"\uff09\u7b49\u4ef7\u4e8e\u4e8e\u539f\u8282\u70b9\u7684\u5bbd\u9ad8("+this.node.width+"x"+this.node.height+")")},t=__decorate([a],t)}(cc.Component));i.default=o,cc._RF.pop()},{}],Continue:[function(e,t,i){"use strict";cc._RF.push(t,"4e8b41K89RPH7o4JKYHzoT7","Continue");var n=e("../Script/util/CommonUtil");cc.Class({extends:cc.Component,properties:{progressBar:{type:cc.ProgressBar,default:null},knife:{type:cc.Node,default:null},stageLabel:{type:cc.Label,default:null},endGame:{type:cc.Node,default:null},gameNode:{type:cc.Node,default:null}},onLoad:function(){this.profileManager=cc.find("ProfileManager").getComponent("ProfileManager")},showDialog:function(){this.time=10,this.show=!0,this.node.active=!0,this.stageLabel.string=this.profileManager.stage,this.scheduleOnce(function(){this.endGame.active=!0},1.5),this.bannerAd=n.showBannerAd("14ec8dfdd2e08d0c53e754ac4978ab93")},continueGame:function(){this.adShowing=!0;var e=this;n.showVideoAd("352a516d6f6e7a555de93c6c2e45b433",function(){e.gameNode.getComponent("Game").continueGame(),e.hideDialog()},function(){e.adShowing=!1,e.gameNode.getComponent("Game").showNetworkDialog()},function(){e.adShowing=!1})},forceEndGame:function(){var e=new cc.Event.EventCustom("onGameOver",!0);e.setUserData(!0),this.node.dispatchEvent(e)},hideDialog:function(){this.show=!1,this.adShowing=!1,this.node.active=!1},update:function(e){this.show&&this.time>0&&1!=this.adShowing?(this.time-=e,this.progressBar.progress=this.time/10,this.knife.x=20-50*this.progressBar.progress,this.knife.y=50*this.progressBar.progress-20):1!=this.adShowing&&(this.show&&this.time<=0&&this.forceEndGame(),this.show=!1,this.time=0)}}),cc._RF.pop()},{"../Script/util/CommonUtil":"CommonUtil"}],CryptoJS:[function(e,t,i){"use strict";cc._RF.push(t,"9a899/DnaxFvLuPMSDTUOZ6","CryptoJS");var n=n||function(e,t){var i={},n=i.lib={},a=function(){},o=n.Base={extend:function(e){a.prototype=this;var t=new a;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},r=n.WordArray=o.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=void 0!=t?t:4*e.length},toString:function(e){return(e||c).stringify(this)},concat:function(e){var t=this.words,i=e.words,n=this.sigBytes;if(e=e.sigBytes,this.clamp(),n%4)for(var a=0;a<e;a++)t[n+a>>>2]|=(i[a>>>2]>>>24-a%4*8&255)<<24-(n+a)%4*8;else if(65535<i.length)for(a=0;a<e;a+=4)t[n+a>>>2]=i[a>>>2];else t.push.apply(t,i);return this.sigBytes+=e,this},clamp:function(){var t=this.words,i=this.sigBytes;t[i>>>2]&=4294967295<<32-i%4*8,t.length=e.ceil(i/4)},clone:function(){var e=o.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var i=[],n=0;n<t;n+=4)i.push(4294967296*e.random()|0);return new r.init(i,t)}}),s=i.enc={},c=s.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var i=[],n=0;n<e;n++){var a=t[n>>>2]>>>24-n%4*8&255;i.push((a>>>4).toString(16)),i.push((15&a).toString(16))}return i.join("")},parse:function(e){for(var t=e.length,i=[],n=0;n<t;n+=2)i[n>>>3]|=parseInt(e.substr(n,2),16)<<24-n%8*4;return new r.init(i,t/2)}},l=s.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var i=[],n=0;n<e;n++)i.push(String.fromCharCode(t[n>>>2]>>>24-n%4*8&255));return i.join("")},parse:function(e){for(var t=e.length,i=[],n=0;n<t;n++)i[n>>>2]|=(255&e.charCodeAt(n))<<24-n%4*8;return new r.init(i,t)}},h=s.Utf8={stringify:function(e){try{return decodeURIComponent(escape(l.stringify(e)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(e){return l.parse(unescape(encodeURIComponent(e)))}},d=n.BufferedBlockAlgorithm=o.extend({reset:function(){this._data=new r.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=h.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var i=this._data,n=i.words,a=i.sigBytes,o=this.blockSize,s=a/(4*o);if(t=(s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0))*o,a=e.min(4*t,a),t){for(var c=0;c<t;c+=o)this._doProcessBlock(n,c);c=n.splice(0,t),i.sigBytes-=a}return new r.init(c,a)},clone:function(){var e=o.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});n.Hasher=d.extend({cfg:o.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){d.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,i){return new e.init(i).finalize(t)}},_createHmacHelper:function(e){return function(t,i){return new p.HMAC.init(e,i).finalize(t)}}});var p=i.algo={};return i}(Math);(function(){var e=n,t=e.lib.WordArray;e.enc.Base64={stringify:function(e){var t=e.words,i=e.sigBytes,n=this._map;e.clamp(),e=[];for(var a=0;a<i;a+=3)for(var o=(t[a>>>2]>>>24-a%4*8&255)<<16|(t[a+1>>>2]>>>24-(a+1)%4*8&255)<<8|t[a+2>>>2]>>>24-(a+2)%4*8&255,r=0;4>r&&a+.75*r<i;r++)e.push(n.charAt(o>>>6*(3-r)&63));if(t=n.charAt(64))for(;e.length%4;)e.push(t);return e.join("")},parse:function(e){var i=e.length,n=this._map;(a=n.charAt(64))&&(-1!=(a=e.indexOf(a))&&(i=a));for(var a=[],o=0,r=0;r<i;r++)if(r%4){var s=n.indexOf(e.charAt(r-1))<<r%4*2,c=n.indexOf(e.charAt(r))>>>6-r%4*2;a[o>>>2]|=(s|c)<<24-o%4*8,o++}return t.create(a,o)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}})(),function(e){function t(e,t,i,n,a,o,r){return((e=e+(t&i|~t&n)+a+r)<<o|e>>>32-o)+t}function i(e,t,i,n,a,o,r){return((e=e+(t&n|i&~n)+a+r)<<o|e>>>32-o)+t}function a(e,t,i,n,a,o,r){return((e=e+(t^i^n)+a+r)<<o|e>>>32-o)+t}function o(e,t,i,n,a,o,r){return((e=e+(i^(t|~n))+a+r)<<o|e>>>32-o)+t}for(var r=n,s=(l=r.lib).WordArray,c=l.Hasher,l=r.algo,h=[],d=0;64>d;d++)h[d]=4294967296*e.abs(e.sin(d+1))|0;l=l.MD5=c.extend({_doReset:function(){this._hash=new s.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,n){for(var r=0;16>r;r++){var s=e[d=n+r];e[d]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8)}r=this._hash.words;var c,l,d=e[n+0],p=(s=e[n+1],e[n+2]),g=e[n+3],f=e[n+4],u=e[n+5],m=e[n+6],v=e[n+7],S=e[n+8],y=e[n+9],C=e[n+10],_=e[n+11],k=e[n+12],M=e[n+13],b=e[n+14],w=e[n+15],L=r[0],B=o(B=o(B=o(B=o(B=a(B=a(B=a(B=a(B=i(B=i(B=i(B=i(B=t(B=t(B=t(B=t(B=r[1],l=t(l=r[2],c=t(c=r[3],L=t(L,B,l,c,d,7,h[0]),B,l,s,12,h[1]),L,B,p,17,h[2]),c,L,g,22,h[3]),l=t(l,c=t(c,L=t(L,B,l,c,f,7,h[4]),B,l,u,12,h[5]),L,B,m,17,h[6]),c,L,v,22,h[7]),l=t(l,c=t(c,L=t(L,B,l,c,S,7,h[8]),B,l,y,12,h[9]),L,B,C,17,h[10]),c,L,_,22,h[11]),l=t(l,c=t(c,L=t(L,B,l,c,k,7,h[12]),B,l,M,12,h[13]),L,B,b,17,h[14]),c,L,w,22,h[15]),l=i(l,c=i(c,L=i(L,B,l,c,s,5,h[16]),B,l,m,9,h[17]),L,B,_,14,h[18]),c,L,d,20,h[19]),l=i(l,c=i(c,L=i(L,B,l,c,u,5,h[20]),B,l,C,9,h[21]),L,B,w,14,h[22]),c,L,f,20,h[23]),l=i(l,c=i(c,L=i(L,B,l,c,y,5,h[24]),B,l,b,9,h[25]),L,B,g,14,h[26]),c,L,S,20,h[27]),l=i(l,c=i(c,L=i(L,B,l,c,M,5,h[28]),B,l,p,9,h[29]),L,B,v,14,h[30]),c,L,k,20,h[31]),l=a(l,c=a(c,L=a(L,B,l,c,u,4,h[32]),B,l,S,11,h[33]),L,B,_,16,h[34]),c,L,b,23,h[35]),l=a(l,c=a(c,L=a(L,B,l,c,s,4,h[36]),B,l,f,11,h[37]),L,B,v,16,h[38]),c,L,C,23,h[39]),l=a(l,c=a(c,L=a(L,B,l,c,M,4,h[40]),B,l,d,11,h[41]),L,B,g,16,h[42]),c,L,m,23,h[43]),l=a(l,c=a(c,L=a(L,B,l,c,y,4,h[44]),B,l,k,11,h[45]),L,B,w,16,h[46]),c,L,p,23,h[47]),l=o(l,c=o(c,L=o(L,B,l,c,d,6,h[48]),B,l,v,10,h[49]),L,B,b,15,h[50]),c,L,u,21,h[51]),l=o(l,c=o(c,L=o(L,B,l,c,k,6,h[52]),B,l,g,10,h[53]),L,B,C,15,h[54]),c,L,s,21,h[55]),l=o(l,c=o(c,L=o(L,B,l,c,S,6,h[56]),B,l,w,10,h[57]),L,B,m,15,h[58]),c,L,M,21,h[59]),l=o(l,c=o(c,L=o(L,B,l,c,f,6,h[60]),B,l,_,10,h[61]),L,B,p,15,h[62]),c,L,y,21,h[63]);r[0]=r[0]+L|0,r[1]=r[1]+B|0,r[2]=r[2]+l|0,r[3]=r[3]+c|0},_doFinalize:function(){var t=this._data,i=t.words,n=8*this._nDataBytes,a=8*t.sigBytes;i[a>>>5]|=128<<24-a%32;var o=e.floor(n/4294967296);for(i[15+(a+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),i[14+(a+64>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),t.sigBytes=4*(i.length+1),this._process(),i=(t=this._hash).words,n=0;4>n;n++)a=i[n],i[n]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8);return t},clone:function(){var e=c.clone.call(this);return e._hash=this._hash.clone(),e}}),r.MD5=c._createHelper(l),r.HmacMD5=c._createHmacHelper(l)}(Math),function(){var e,t=n,i=(e=t.lib).Base,a=e.WordArray,o=(e=t.algo).EvpKDF=i.extend({cfg:i.extend({keySize:4,hasher:e.MD5,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var i=(s=this.cfg).hasher.create(),n=a.create(),o=n.words,r=s.keySize,s=s.iterations;o.length<r;){c&&i.update(c);var c=i.update(e).finalize(t);i.reset();for(var l=1;l<s;l++)c=i.finalize(c),i.reset();n.concat(c)}return n.sigBytes=4*r,n}});t.EvpKDF=function(e,t,i){return o.create(i).compute(e,t)}}(),n.lib.Cipher||function(e){var t=(f=n).lib,i=t.Base,a=t.WordArray,o=t.BufferedBlockAlgorithm,r=f.enc.Base64,s=f.algo.EvpKDF,c=t.Cipher=o.extend({cfg:i.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,i){this.cfg=this.cfg.extend(i),this._xformMode=e,this._key=t,this.reset()},reset:function(){o.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(e){return{encrypt:function(t,i,n){return("string"==typeof i?u:g).encrypt(e,t,i,n)},decrypt:function(t,i,n){return("string"==typeof i?u:g).decrypt(e,t,i,n)}}}});t.StreamCipher=c.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var l=f.mode={},h=function(e,t,i){var n=this._iv;n?this._iv=void 0:n=this._prevBlock;for(var a=0;a<i;a++)e[t+a]^=n[a]},d=(t.BlockCipherMode=i.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}})).extend();d.Encryptor=d.extend({processBlock:function(e,t){var i=this._cipher,n=i.blockSize;h.call(this,e,t,n),i.encryptBlock(e,t),this._prevBlock=e.slice(t,t+n)}}),d.Decryptor=d.extend({processBlock:function(e,t){var i=this._cipher,n=i.blockSize,a=e.slice(t,t+n);i.decryptBlock(e,t),h.call(this,e,t,n),this._prevBlock=a}}),l=l.CBC=d,d=(f.pad={}).Pkcs7={pad:function(e,t){for(var i,n=(i=(i=4*t)-e.sigBytes%i)<<24|i<<16|i<<8|i,o=[],r=0;r<i;r+=4)o.push(n);i=a.create(o,i),e.concat(i)},unpad:function(e){e.sigBytes-=255&e.words[e.sigBytes-1>>>2]}},t.BlockCipher=c.extend({cfg:c.cfg.extend({mode:l,padding:d}),reset:function(){c.reset.call(this);var e=(t=this.cfg).iv,t=t.mode;if(this._xformMode==this._ENC_XFORM_MODE)var i=t.createEncryptor;else i=t.createDecryptor,this._minBufferSize=1;this._mode=i.call(t,this,e&&e.words)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){e.pad(this._data,this.blockSize);var t=this._process(!0)}else t=this._process(!0),e.unpad(t);return t},blockSize:4});var p=t.CipherParams=i.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),g=(l=(f.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext;return((e=e.salt)?a.create([1398893684,1701076831]).concat(e).concat(t):t).toString(r)},parse:function(e){var t=(e=r.parse(e)).words;if(1398893684==t[0]&&1701076831==t[1]){var i=a.create(t.slice(2,4));t.splice(0,4),e.sigBytes-=16}return p.create({ciphertext:e,salt:i})}},t.SerializableCipher=i.extend({cfg:i.extend({format:l}),encrypt:function(e,t,i,n){n=this.cfg.extend(n);var a=e.createEncryptor(i,n);return t=a.finalize(t),a=a.cfg,p.create({ciphertext:t,key:i,iv:a.iv,algorithm:e,mode:a.mode,padding:a.padding,blockSize:e.blockSize,formatter:n.format})},decrypt:function(e,t,i,n){return n=this.cfg.extend(n),t=this._parse(t,n.format),e.createDecryptor(i,n).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}})),f=(f.kdf={}).OpenSSL={execute:function(e,t,i,n){return n||(n=a.random(8)),e=s.create({keySize:t+i}).compute(e,n),i=a.create(e.words.slice(t),4*i),e.sigBytes=4*t,p.create({key:e,iv:i,salt:n})}},u=t.PasswordBasedCipher=g.extend({cfg:g.cfg.extend({kdf:f}),encrypt:function(e,t,i,n){return i=(n=this.cfg.extend(n)).kdf.execute(i,e.keySize,e.ivSize),n.iv=i.iv,(e=g.encrypt.call(this,e,t,i.key,n)).mixIn(i),e},decrypt:function(e,t,i,n){return n=this.cfg.extend(n),t=this._parse(t,n.format),i=n.kdf.execute(i,e.keySize,e.ivSize,t.salt),n.iv=i.iv,g.decrypt.call(this,e,t,i.key,n)}})}(),function(){for(var e=n,t=e.lib.BlockCipher,i=e.algo,a=[],o=[],r=[],s=[],c=[],l=[],h=[],d=[],p=[],g=[],f=[],u=0;256>u;u++)f[u]=128>u?u<<1:u<<1^283;var m=0,v=0;for(u=0;256>u;u++){var S=(S=v^v<<1^v<<2^v<<3^v<<4)>>>8^255&S^99;a[m]=S,o[S]=m;var y=f[m],C=f[y],_=f[C],k=257*f[S]^16843008*S;r[m]=k<<24|k>>>8,s[m]=k<<16|k>>>16,c[m]=k<<8|k>>>24,l[m]=k,k=16843009*_^65537*C^257*y^16843008*m,h[S]=k<<24|k>>>8,d[S]=k<<16|k>>>16,p[S]=k<<8|k>>>24,g[S]=k,m?(m=y^f[f[f[_^y]]],v^=f[f[v]]):m=v=1}var M=[0,1,2,4,8,16,32,64,128,27,54];i=i.AES=t.extend({_doReset:function(){for(var e=(i=this._key).words,t=i.sigBytes/4,i=4*((this._nRounds=t+6)+1),n=this._keySchedule=[],o=0;o<i;o++)if(o<t)n[o]=e[o];else{var r=n[o-1];o%t?6<t&&4==o%t&&(r=a[r>>>24]<<24|a[r>>>16&255]<<16|a[r>>>8&255]<<8|a[255&r]):(r=a[(r=r<<8|r>>>24)>>>24]<<24|a[r>>>16&255]<<16|a[r>>>8&255]<<8|a[255&r],r^=M[o/t|0]<<24),n[o]=n[o-t]^r}for(e=this._invKeySchedule=[],t=0;t<i;t++)o=i-t,r=t%4?n[o]:n[o-4],e[t]=4>t||4>=o?r:h[a[r>>>24]]^d[a[r>>>16&255]]^p[a[r>>>8&255]]^g[a[255&r]]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,r,s,c,l,a)},decryptBlock:function(e,t){var i=e[t+1];e[t+1]=e[t+3],e[t+3]=i,this._doCryptBlock(e,t,this._invKeySchedule,h,d,p,g,o),i=e[t+1],e[t+1]=e[t+3],e[t+3]=i},_doCryptBlock:function(e,t,i,n,a,o,r,s){for(var c=this._nRounds,l=e[t]^i[0],h=e[t+1]^i[1],d=e[t+2]^i[2],p=e[t+3]^i[3],g=4,f=1;f<c;f++){var u=n[l>>>24]^a[h>>>16&255]^o[d>>>8&255]^r[255&p]^i[g++],m=n[h>>>24]^a[d>>>16&255]^o[p>>>8&255]^r[255&l]^i[g++],v=n[d>>>24]^a[p>>>16&255]^o[l>>>8&255]^r[255&h]^i[g++];p=n[p>>>24]^a[l>>>16&255]^o[h>>>8&255]^r[255&d]^i[g++],l=u,h=m,d=v}u=(s[l>>>24]<<24|s[h>>>16&255]<<16|s[d>>>8&255]<<8|s[255&p])^i[g++],m=(s[h>>>24]<<24|s[d>>>16&255]<<16|s[p>>>8&255]<<8|s[255&l])^i[g++],v=(s[d>>>24]<<24|s[p>>>16&255]<<16|s[l>>>8&255]<<8|s[255&h])^i[g++],p=(s[p>>>24]<<24|s[l>>>16&255]<<16|s[h>>>8&255]<<8|s[255&d])^i[g++],e[t]=u,e[t+1]=m,e[t+2]=v,e[t+3]=p},keySize:8});e.AES=t._createHelper(i)}(),n.mode.ECB=function(){var e=n.lib.BlockCipherMode.extend();return e.Encryptor=e.extend({processBlock:function(e,t){this._cipher.encryptBlock(e,t)}}),e.Decryptor=e.extend({processBlock:function(e,t){this._cipher.decryptBlock(e,t)}}),e}(),t.exports={CryptoJS:n},cc._RF.pop()},{}],Fire:[function(e,t,i){"use strict";cc._RF.push(t,"a65f55fg/tPOqKIdQSfQFs+","Fire"),cc.Class({extends:cc.Component,properties:{prefab:cc.Prefab},start:function(){},Fire:function(){var e=cc.instantiate(this.prefab);e.parent=this.node.parent,e.position=this.node.position}}),cc._RF.pop()},{}],GameOver:[function(e,t,i){"use strict";cc._RF.push(t,"d00e5i+tpZFdJSc7GRGPCdR","GameOver");var n=e("../../Script/util/BigNumUtil"),a=e("../../Script/http/HttpUtil"),o=e("../../Script/util/CommonUtil");cc.Class({extends:cc.Component,properties:{knifeLabel:cc.Label,knifeSprite:cc.Sprite,hightestStageLabel:cc.Label,stageLabel:cc.Label,coinsLabel:cc.Label,stoneLabel:cc.Label,audioGameOver:{type:cc.AudioSource,default:null},soundSprite:cc.Sprite,rankDialogNode:cc.Node,soundOnSpriteFrame:cc.SpriteFrame,soundOffSpriteFrame:cc.SpriteFrame,bgSprite:cc.Sprite,lineSprite:cc.Sprite,ribbonSprite:cc.Sprite,bottomNode:cc.Node},start:function(){},onLoad:function(){if(this.resManager=cc.find("ResManager").getComponent("ResManager"),this.bgSprite.spriteFrame=this.resManager.getLoadedResData("bg1Img"),this.bgSprite.node.color=new cc.Color(46,145,230),this.lineSprite.spriteFrame=this.resManager.getLoadedResData("lineShadowImg"),this.profileManager=cc.find("ProfileManager").getComponent("ProfileManager"),this.knifeLabel.string=String(this.profileManager.displayKnife.level),this.hightestStageLabel.string=this.profileManager.hightestLevel,this.stageLabel.string=this.profileManager.stage,this.knifeSprite.spriteFrame=this.profileManager.displayKnife.icon,this.profileManager.userInfo){if(this.profileManager.stage>this.profileManager.hightestLevel){var e=this;a.updateHightest({openId:this.profileManager.openId,hightestCreatedKnife:parseInt(this.profileManager.displayKnife.level),hightestScore:parseInt(this.profileManager.score),hightestLevel:parseInt(this.profileManager.stage)},function(t){console.log("updateHightest success:",t),e.profileManager.hightestScore=e.profileManager.score,e.profileManager.hightestLevel=e.profileManager.stage},function(e){console.log("updateHightest fail:",e)}),this.hightestStageLabel.string=this.profileManager.stage}wx.postMessage({event:"setScore",knifeLv:this.profileManager.displayKnife.level,stage:this.profileManager.stage})}else this.bottomNode.active=!1,this.hightestStageLabel.string=this.profileManager.stage;this.bannerAd=o.showBannerAd("1c34da9c07a41ba7a68c7d27d9563e2a")},clickRank:function(){"undefined"!=typeof wx&&(this.rankDialogNode.active||(this.rankDialogNode.active=!0,this.rankDialogNode.getComponent("Rank").getData()))},clickShare:function(){wx.updateShareMenu({withShareTicket:!1}),wx.shareAppMessage({query:"isScoreRank="+!0,title:"\u521b\u65b0\u8bb0\u5f55\uff01\u6562\u5426\u4e0e\u6211\u4e00\u6218\uff01",imageUrlId:"id",imageUrl:baseURL+"res/Texture/share.jpg",success:function(e){}})},gotoHome:function(){cc.director.loadScene("hecheng/hecheng")},update:function(e){this.coinsLabel.string=n.formatNum(this.profileManager._CoinsHC),this.stoneLabel.string=n.formatNum(this.profileManager._Stone)},onDestroy:function(){console.log("onDestroy")}}),cc._RF.pop()},{"../../Script/http/HttpUtil":"HttpUtil","../../Script/util/BigNumUtil":"BigNumUtil","../../Script/util/CommonUtil":"CommonUtil"}],Game:[function(e,t,i){"use strict";cc._RF.push(t,"8f863hiLVxK4rN8AGnEQnEz","Game");var n=e("../Script/util/BigNumUtil"),a=e("../Script/util/CommonUtil");cc.Class({extends:cc.Component,properties:{coinsLabel:{type:cc.Label,default:null},stoneLabel:cc.Label,stageLabel:{type:cc.Label,default:null},stageBgNode:{type:cc.Node,default:null},hpBg:cc.Sprite,hpProgressBar:cc.ProgressBar,hpBarSprite:cc.Sprite,heartListItemPrefab:cc.Prefab,grayMaterial:cc.Material,colorMaterial:cc.Material,knifeSprite:cc.Sprite,knifePrefab:cc.Prefab,networkDialog:cc.Node,containerNode:{type:cc.Node,default:null},audioAppera:{type:cc.AudioSource,default:null},audioThrow:{type:cc.AudioSource,default:null},audioHit:{type:cc.AudioSource,default:null},_lifeCount:1,continueDialogNode:{type:cc.Node,default:null},bgSprite:cc.Sprite,circleSprite:cc.Sprite},onLoad:function(){cc.game.setFrameRate(60),this.resManager=cc.find("ResManager").getComponent("ResManager"),this.bgSprite.spriteFrame=this.resManager.getLoadedResData("bg1Img"),this.circleSprite.spriteFrame=this.resManager.getLoadedResData("circleImg"),this.hpBg.spriteFrame=this.resManager.getLoadedResData("hpBgImg"),this.hpBarSprite.spriteFrame=this.resManager.getLoadedResData("hpBarImg"),this.hpProgressBar.node.getComponent(cc.Sprite).spriteFrame=this.resManager.getLoadedResData("hpBarBgImg"),this.stageBgNode.getComponent(cc.Sprite).spriteFrame=this.resManager.getLoadedResData("stageIconImg"),this.profileManager=cc.find("ProfileManager").getComponent("ProfileManager"),this.profileManager.stage=0,this.profileManager.stage+=1,this.profileManager.score=0,this.leftLife=3,this.heartSize=3,this.initGame(this.profileManager.stage),this.initHeartList(),this.updateHeartListState(),this.profileManager.displayKnife&&(this.knifeSprite.spriteFrame=this.profileManager.displayKnife.icon),1==this.profileManager._sound&&this.audioAppera.play(),this.node.on("onCoinAdd",function(e){}.bind(this)),this.node.on("onGameOver",function(e){var t=e.getUserData();this.leftLife>0&&(this.leftLife-=1,this.updateHeartListState()),this.leftLife>0?this.leftHP>0?this.node.getChildByName("content").getChildByName("newknife").active=!0:1!=this.inPassedAnim&&this.playBreakAnim():t?cc.director.loadScene("gameover/GameOver"):1!=this.continueDialogNode.getComponent("Continue").show&&(this._lifeCount>0?this.pauseGameForContinue():cc.director.loadScene("gameover/GameOver"))}.bind(this))},pauseGameForContinue:function(){this.continueDialogNode.getComponent("Continue").showDialog(),this._lifeCount-=1,this.containerNode.getComponent("Circle").pauseGame()},showNetworkDialog:function(){a.runDialogAnim(this.networkDialog)},closeNetworkDialog:function(){this.networkDialog.active=!1},initGame:function(e){this.initHP(e),this.initStageHint(),this.hitKnifeCount=0,this.circleSprite.node.active=!0,this.containerNode.angle=0,this.knifeSprite.node.active=!0,this.circleSprite.spriteFrame=e%5==0?this.resManager.getLoadedResData("stage"+e+"TrunkImg"):this.resManager.getLoadedResData("circleImg");for(var t=e;t>50;)t-=50;switch(Math.ceil(t/5)){case 1:this.bgSprite.node.color=new cc.Color(46,145,230);break;case 2:this.bgSprite.node.color=new cc.Color(46,230,101);break;case 3:this.bgSprite.node.color=new cc.Color(230,167,46);break;case 4:this.bgSprite.node.color=new cc.Color(153,46,230);break;case 5:this.bgSprite.node.color=new cc.Color(46,160,230);break;case 6:this.bgSprite.node.color=new cc.Color(46,230,86);break;case 7:this.bgSprite.node.color=new cc.Color(182,230,46);break;case 8:this.bgSprite.node.color=new cc.Color(230,204,46);break;case 9:this.bgSprite.node.color=new cc.Color(230,116,46);break;case 10:this.bgSprite.node.color=new cc.Color(46,153,230);break;default:this.bgSprite.node.color=new cc.Color(46,145,230)}this.containerNode.getComponent("Circle").initKnifeAndApple(e),this.containerNode.scale=.1;var i=cc.tween().to(.4,{scale:1.1},{easing:"quartOut"}),n=cc.tween().to(.2,{scale:1});cc.tween(this.containerNode).then(i).then(n).start(),this.scheduleOnce(function(){this.containerNode.getComponent("Circle").turnOnAnim()}.bind(this),.6)},onEnable:function(){cc.director.getCollisionManager().enabled=!0},onDisable:function(){cc.director.getCollisionManager().enabled=!1},initStageHint:function(){if(0==this.profileManager.stage%5)this.stageBgNode.color=new cc.Color(255,37,0);else{for(var e=this.profileManager.stage;e>50;)e-=50;switch(Math.ceil(e/5)){case 1:this.stageBgNode.color=new cc.Color(46,145,230);break;case 2:this.stageBgNode.color=new cc.Color(46,230,101);break;case 3:this.stageBgNode.color=new cc.Color(230,167,46);break;case 4:this.stageBgNode.color=new cc.Color(153,46,230);break;case 5:this.stageBgNode.color=new cc.Color(46,160,230);break;case 6:this.stageBgNode.color=new cc.Color(46,230,86);break;case 7:this.stageBgNode.color=new cc.Color(182,230,46);break;case 8:this.stageBgNode.color=new cc.Color(230,204,46);break;case 9:this.stageBgNode.color=new cc.Color(230,116,46);break;case 10:this.stageBgNode.color=new cc.Color(46,153,230);break;default:this.stageBgNode.color=new cc.Color(46,145,230)}}this.stageLabel.string=String(this.profileManager.stage)},fire:function(){if(console.log("leftHP:",this.leftHP),this.leftHP>0){1==this.profileManager._sound&&this.audioThrow.play();var e=this.node.getChildByName("content").getChildByName("newknife");console.log("newknife:"+e.parent);var t=cc.instantiate(this.knifePrefab);if(t.parent=e.parent,t.position=e.position,t.zIndex=-1,t.getComponent("KnifeMove").Speed=this.profileManager.displayKnife.speed,this.profileManager.displayKnife)t.getComponent(cc.Sprite).spriteFrame=this.profileManager.displayKnife.icon;e.active=!1}},onScore:function(){if(1!=this.continueDialogNode.getComponent("Continue").show){this.container=this.node.getChildByName("content").getChildByName("container");var e=cc.sequence(cc.moveTo(.05,this.container.x,this.container.y+20),cc.moveTo(.05,this.container.x,this.container.y));this.container.runAction(e),this.leftHP-=this.profileManager.displayKnife.harm,this.leftHP=Math.max(0,this.leftHP),this.hpProgressBar.progress=this.leftHP/this._MaxHP,0==this.leftHP?1!=this.inPassedAnim&&1!=this.continueDialogNode.getComponent("Continue").show&&this.playBreakAnim():(this.node.getChildByName("content").getChildByName("newknife").active=!0,1==this.profileManager._sound&&this.audioHit.play())}},playBreakAnim:function(){this.inPassedAnim=!0,this.containerNode.getComponent("Circle").pauseGame();var e=cc.tween().to(.2,{scale:1.1}),t=cc.tween().to(.4,{scale:0},{easing:"sineInOut"});cc.tween(this.containerNode).then(e).then(t).start(),this.scheduleOnce(function(){this.gotoNextStage(),this.inPassedAnim=!1},1)},continueGame:function(){this.leftLife=3,this.updateHeartListState(),this.containerNode.getComponent("Circle").resumeGame(),this.node.getChildByName("content").getChildByName("newknife").active=!0},initHP:function(e){for(var t=Math.ceil(e/50),i=e;i>50;)i-=50;switch(i){case 1:this._MaxHP=700*t;break;case 4:case 5:case 8:this._MaxHP=800*t;break;case 2:case 6:case 12:case 15:this._MaxHP=900*t;break;case 3:case 9:case 11:case 13:case 20:this._MaxHP=1e3*t;break;case 7:case 18:this._MaxHP=1100*t;break;case 16:case 26:case 30:case 33:case 40:case 50:this._MaxHP=1200*t;break;case 10:case 19:case 28:case 47:case 48:this._MaxHP=1300*t;break;case 14:case 23:case 27:case 31:case 32:case 37:case 38:case 39:case 44:this._MaxHP=1400*t;break;case 17:case 36:case 41:case 45:case 49:this._MaxHP=1500*t;break;case 21:case 22:case 24:this._MaxHP=1600*t;break;case 29:case 34:case 42:case 43:case 46:this._MaxHP=1700*t;break;case 25:case 35:this._MaxHP=2e3*t}this.leftHP=this._MaxHP,this.hpProgressBar.progress=1},initHeartList:function(){this.heartListNode=this.node.getChildByName("content").getChildByName("heartList"),this.heartListNode.removeAllChildren();for(var e=0;e<this.heartSize;e++){cc.instantiate(this.heartListItemPrefab).parent=this.heartListNode}},updateHeartListState:function(){for(var e=this.heartSize;e>0;e--)e>this.leftLife?this.heartListNode.children[e-1].getComponent(cc.Sprite).setMaterial(0,this.grayMaterial):this.heartListNode.children[e-1].getComponent(cc.Sprite).setMaterial(0,this.colorMaterial)},gotoNextStage:function(){this.profileManager.stage+=1,this.initGame(this.profileManager.stage)},update:function(e){this.coinsLabel.string=n.formatNum(this.profileManager._CoinsHC),this.stoneLabel.string=n.formatNum(this.profileManager._Stone)}}),cc._RF.pop()},{"../Script/util/BigNumUtil":"BigNumUtil","../Script/util/CommonUtil":"CommonUtil"}],GiftManager:[function(e,t,i){"use strict";cc._RF.push(t,"383f5lRCaNIMJJmla4RLlwO","GiftManager");var n=e("../../Script/http/HttpUtil");e("../Script/util/BigNumUtil");cc.Class({extends:cc.Component,properties:{giftLabel:{type:cc.Label,default:null},giftSprite:{type:cc.Sprite,default:null},giftNormalSpriteFrame:cc.SpriteFrame,giftActiveSpriteFrame:cc.SpriteFrame,heartBeatAnim:{type:cc.Animation,default:null},coinsAnimPrefab:{type:cc.Prefab,default:null},stoneGetLeftCountNode:cc.Node,stoneGetLeftCountLabel:cc.Label,stoneSpriteFrame:cc.SpriteFrame},onLoad:function(){var e=cc.find("ProfileManager").getComponent("ProfileManager");this.profileManager=e},updateState:function(){var e=cc.find("ProfileManager").getComponent("ProfileManager");this.lastGetTime=e.last_get_gift_time,console.log("lastGetTime in updateState:",this.lastGetTime);var t=new Date;null==this.lastGetTime||t.getTime()-this.lastGetTime>288e5?(this.giftLabel.string="\u9886\u53d6",this.giftSprite.spriteFrame=this.giftActiveSpriteFrame,this.lastGetTime=0,this.animState=this.heartBeatAnim.play()):(this.giftSprite.spriteFrame=this.giftNormalSpriteFrame,this.animState=this.heartBeatAnim.getAnimationState("heart_beat"))},start:function(){},clickGift:function(){if(1!=this._inGettingState){this._inGettingState=!0;var e=cc.find("ProfileManager").getComponent("ProfileManager");this.lastGetTime=e.last_get_gift_time;var t=new Date;if(this.profileManager.stoneGetLeftCount>0){this.addStone(20),this.lastGetTime=t.getTime();var i=cc.instantiate(this.coinsAnimPrefab);i.getComponent(cc.ParticleSystem).spriteFrame=this.stoneSpriteFrame,this.giftSprite.node.addChild(i)}}},addStone:function(e){var t=this;n.addStone({openId:t.profileManager.openId,addCount:parseInt(e),isGift:1},function(i){console.log("addStone:",i),t.profileManager.last_get_gift_time=t.convertDateForIos(JSON.parse(i).last_get_gift_time).getTime(),t.profileManager.stoneGetLeftCount=JSON.parse(i).stoneGetLeftCount,t.lastGetTime=t.profileManager.last_get_gift_time,t.profileManager._Stone=parseInt(t.profileManager._Stone)+parseInt(e);var n=new cc.Event.EventCustom("onStoneAdd",!0);n.setUserData(20),t.node.dispatchEvent(n),t._inGettingState=!1},function(e){console.log("addCoins fail:",e)})},convertDateForIos:function(e){var t=e.split(/[- :]/);return e=new Date(t[0],t[1]-1,t[2],t[3],t[4],t[5])},update:function(e){this.updateGiftHint()},updateGiftHint:function(){this.profileManager.stoneGetLeftCount>0?(this.giftLabel.node.opacity=255,this.giftLabel.string="\u9886\u53d6",this.giftSprite.spriteFrame=this.giftActiveSpriteFrame,this.animState&&!this.animState.isPlaying&&this.heartBeatAnim.play(),this.stoneGetLeftCountNode.active=!0):(this.giftLabel.string="\u793c\u5305",this.giftSprite.spriteFrame=this.giftNormalSpriteFrame,this.animState&&this.animState.isPlaying&&this.heartBeatAnim.stop(),this.stoneGetLeftCountNode.active=!1),this.stoneGetLeftCountLabel.string=String(this.profileManager.stoneGetLeftCount)}}),cc._RF.pop()},{"../../Script/http/HttpUtil":void 0,"../Script/util/BigNumUtil":"BigNumUtil"}],Guide:[function(e,t,i){"use strict";cc._RF.push(t,"9e3317DC2VPfbeVXhUWxpu3","Guide"),Object.defineProperty(i,"__esModule",{value:!0});var n=cc._decorator,a=n.ccclass,o=n.property,r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.finger=null,t.displayNode=null,t.stepIndex=0,t.inUse=!1,t}return __extends(t,e),t.prototype.start=function(){},t.prototype.initAndStart=function(e,t,i){this.inUse=!0,this.node.active=!0,this.gridItemStart=e,this.gridItemEnd=t,this.playBtnNode=i,this.fingerNode=cc.instantiate(this.finger),this.fingerNode.setParent(this.node.getParent()),this.fingerNode.position=this.fingerNode.getParent().convertToNodeSpaceAR(this.gridItemStart.convertToWorldSpaceAR(cc.Vec2.ZERO)),this.stepNext()},t.prototype.stepNext=function(){switch(this.stepIndex){case 0:this.fingerNode.position=this.node.getParent().convertToNodeSpaceAR(this.gridItemStart.convertToWorldSpaceAR(cc.Vec2.ZERO));var e=this.fingerNode.position,t=this.fingerNode.getParent().convertToNodeSpaceAR(this.gridItemEnd.convertToWorldSpaceAR(cc.Vec2.ZERO)),i=cc.tween().to(1,{position:t}),n=cc.tween().to(.1,{position:e});this.tween=cc.tween(this.fingerNode).repeatForever(cc.tween().then(i).then(n)).start();break;case 1:this.tween.stop();e=this.fingerNode.getParent().convertToNodeSpaceAR(this.startDragNode.convertToWorldSpaceAR(cc.Vec2.ZERO)),t=this.fingerNode.getParent().convertToNodeSpaceAR(this.displayNode.convertToWorldSpaceAR(cc.Vec2.ZERO));this.fingerNode.position=e;i=cc.tween().to(1,{position:t}),n=cc.tween().to(.1,{position:e});this.tween=cc.tween(this.fingerNode).repeatForever(cc.tween().then(i).then(n)).start();break;case 2:this.tween.stop();var a=this.fingerNode.getParent().convertToNodeSpaceAR(this.playBtnNode.convertToWorldSpaceAR(cc.Vec2.ZERO));this.fingerNode.position=new cc.Vec2(a.x-15,a.y),this.fingerNode.scaleX=-1;i=cc.tween().to(.5,{position:a}),n=cc.tween().to(.1,{position:new cc.Vec2(a.x-15,a.y)});this.tween=cc.tween(this.fingerNode).repeatForever(cc.tween().then(i).then(n)).start()}},t.prototype.stepDone=function(){this.stepIndex++},__decorate([o(cc.Prefab)],t.prototype,"finger",void 0),__decorate([o(cc.Node)],t.prototype,"displayNode",void 0),t=__decorate([a],t)}(cc.Component);i.default=r,cc._RF.pop()},{}],HttpUtil:[function(e,t,i){"use strict";cc._RF.push(t,"d8cf2cImc1OoasqIQAwVoiE","HttpUtil");var n=e("../util/aesutil"),a=platform;t.exports={PLATFORM:a,updateUserInfo:function(e,t,i){console.log("start updateUserInfo");var o=new Map;o.set("openId",e.openId),o.set("nickName",e.nickName),o.set("avatarUrl",e.avatarUrl),o.set("platform",a);var r=apiBaseUrl;wx.request({url:r+"updateUserInfo.php",data:{sign:n.encrypt(o)},success:function(e){t(e)},fail:function(e){i(e)}})},getProfileInfo:function(e,t,i){console.log("start getProfileInfo");var a=new Map;a.set("openId",e.openId);var o=apiBaseUrl;wx.request({url:o+"hc_getProfileInfosByWeek.php",data:{sign:n.encrypt(a)},success:function(e){t(n.decrypt(e.data))},fail:function(e){i(e)}})},updateAdBuyTime:function(e,t,i){console.log("start updateAdBuyTime");var a=new Map;a.set("openId",e.openId);var o=apiBaseUrl;wx.request({url:o+"updateAdBuyTime.php",data:{sign:n.encrypt(a)},success:function(e){t(n.decrypt(e.data))},fail:function(e){i(e)}})},addCoins:function(e,t,i){console.log("start addCoins");var a=new Map;a.set("openId",e.openId),a.set("addCount",e.addCount),a.set("isGift",e.isGift);var o=apiBaseUrl;wx.request({url:o+"addCoins.php",data:{sign:n.encrypt(a)},success:function(e){t(n.decrypt(e.data))},fail:function(e){i(e)}})},addStone:function(e,t,i){console.log("start addCoins");var a=new Map;a.set("openId",e.openId),a.set("addCount",e.addCount),a.set("isGift",e.isGift);var o=apiBaseUrl;wx.request({url:o+"addStone.php",data:{sign:n.encrypt(a)},success:function(e){t(n.decrypt(e.data))},fail:function(e){i(e)}})},updateHightest:function(e,t,i){console.log("start updateHightest");var a=new Map;a.set("openId",e.openId),a.set("hightestScore",e.hightestScore),a.set("hightestLevel",e.hightestLevel),a.set("hightestCreatedKnife",e.hightestCreatedKnife);var o=apiBaseUrl;wx.request({url:o+"hc_updateHightScore.php",data:{sign:n.encrypt(a)},success:function(e){t(n.decrypt(e.data))},fail:function(e){i(e)}})},updateCurrentKnifeId:function(e,t,i){console.log("start updateCurrentKnifeId");var a=new Map;a.set("openId",e.openId),a.set("currentKnifeId",e.currentKnifeId);var o=apiBaseUrl;wx.request({url:o+"updateCurrentKnifeId.php",data:{sign:n.encrypt(a)},success:function(e){t(n.decrypt(e.data))},fail:function(e){i(e)}})},getOwnKnifeList:function(e,t,i){console.log("start getOwnKnifeList");var a=new Map;a.set("openId",e.openId);var o=apiBaseUrl;wx.request({url:o+"getOwnKnifeList.php",data:{sign:n.encrypt(a)},success:function(e){t(n.decrypt(e.data))},fail:function(e){i(e)}})},getWorldRankStage:function(e,t,i){console.log("start getWorldRankStage");var o=new Map;o.set("platform",a);var r=apiBaseUrl;wx.request({url:r+"getStageRank.php",data:{sign:n.encrypt(o)},success:function(e){t(n.decrypt(e.data))},fail:function(e){i(e)}})},getMyRankStage:function(e,t,i){console.log("start getMyRankStage");var o=new Map;o.set("openId",e.openId),o.set("platform",a);var r=apiBaseUrl;wx.request({url:r+"getMyStageRank.php",data:{sign:n.encrypt(o)},success:function(e){t(n.decrypt(e.data))},fail:function(e){i(e)}})},getWorldRankKnifeCount:function(e,t,i){console.log("start getWorldRankKnifeCount");var o=new Map;o.set("platform",a);var r=apiBaseUrl;wx.request({url:r+"getKnifeCountRank.php",data:{sign:n.encrypt(o)},success:function(e){t(n.decrypt(e.data))},fail:function(e){i(e)}})},getMyRankKnife:function(e,t,i){var o=new Map;o.set("openId",e.openId),o.set("platform",a);var r=apiBaseUrl;wx.request({url:r+"getMyKnifeCountRank.php",data:{sign:n.encrypt(o)},success:function(e){t(n.decrypt(e.data))},fail:function(e){i(e)}})},buyKnife:function(e,t,i){console.log("start buyKnife");var a=new Map;a.set("openId",e.openId),a.set("knifeId",e.knifeId),a.set("coins",e.coins),a.set("getWay",e.getWay);var o=apiBaseUrl;wx.request({url:o+"buyKnife.php",data:{sign:n.encrypt(a)},success:function(e){t(n.decrypt(e.data))},fail:function(e){i(e)}})},getMyPassRank:function(e,t,i){console.log("start getMyPassRank");var o=new Map;o.set("openId",e.openId),o.set("platform",a);var r=apiBaseUrl;wx.request({url:r+"getMyPassRank.php",data:{sign:n.encrypt(o)},success:function(e){t(n.decrypt(e.data))},fail:function(e){i(e)}})},updateHCCoinsAndCount:function(e,t,i){var a=new Map;a.set("openId",e.openId),a.set("coinsHC",e.coinsHC),a.set("coins",e.stone),a.set("boughtKnifeCount",e.boughtKnifeCount);var o=apiBaseUrl;wx.request({url:o+"hc_updateCoinsAndBoughtCount.php",data:{sign:n.encrypt(a)},success:function(e){t(n.decrypt(e.data))},fail:function(e){i(e)}})},updateHCKnifes:function(e,t,i){console.log("start updateHCKnifes"),console.log("hcKnifeLv\uff1a",e.hcKnifeLv),console.log("displayKnifeLv\uff1a",e.displayKnifeLv);var a=new Map;a.set("openId",e.openId),a.set("displayKnifeLv",e.displayKnifeLv),a.set("hcKnifeLv",e.hcKnifeLv);var o=apiBaseUrl;wx.request({url:o+"hc_updateHCKnifes.php",data:{sign:n.encrypt(a)},success:function(e){t(n.decrypt(e.data))},fail:function(e){i(e)}})},getHCKnifesInfo:function(e,t,i){var a=new Map;a.set("openId",e.openId);var o=apiBaseUrl;wx.request({url:o+"hc_getKnifesInfo.php",data:{sign:n.encrypt(a)},success:function(e){t(n.decrypt(e.data))},fail:function(e){i(e)}})}},cc._RF.pop()},{"../util/aesutil":"aesutil"}],KnifeHCItem:[function(e,t,i){"use strict";cc._RF.push(t,"f18542KOmtK4rWl/MUyU9DE","KnifeHCItem"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function e(e){this.level=1,this.speed=0,this.harm=0,this.icon=null,this.setLevel(e)}return e.prototype.setLevel=function(t){this.level=t,this.speed=Math.round((1-Math.cos((t-1)/e.MAX_LV*Math.PI))*(e.MAX_SPEED-e.MIN_SPEED)/2+e.MIN_SPEED),this.harm=Math.round(Math.acos(1-2*(t-1)/e.MAX_LV)/Math.PI*(e.MAX_HARM-e.MIN_HARM)+e.MIN_HARM)},e.MAX_SPEED=6500,e.MIN_SPEED=3e3,e.MAX_HARM=1e3,e.MIN_HARM=100,e.MAX_LV=50,e}();i.default=n,cc._RF.pop()},{}],KnifeHC:[function(e,t,i){"use strict";cc._RF.push(t,"f9d60dZ4lxDn6u5AIaugo8p","KnifeHC"),Object.defineProperty(i,"__esModule",{value:!0});var n=cc._decorator,a=n.ccclass,o=n.property,r=e("../Script/util/BigNumUtil"),s=e("../Script/KnifeHCItem"),c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.hintPrefab=null,t.isInAccSpeedState=!1,t}return __extends(t,e),t.prototype.onLoad=function(){this.node.on(cc.Node.EventType.TOUCH_START,this._onTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this._onTouchMove,this),this.node.on(cc.Node.EventType.TOUCH_END,this._onTouchEnd,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this._onTouchCancel,this),this._hechengScript=cc.find("Canvas").getComponent("hecheng"),this.profileManager=cc.find("ProfileManager").getComponent("ProfileManager"),this.initKnifeHC(1),this.hintCallback=function(){var e=r.getProduction(this.mKnifeHCItem.level);this.profileManager._accSpeedTime>0?(this.isInAccSpeedState||(this.unschedule(this.hintCallback),this.isInAccSpeedState=!0,this.schedule(this.hintCallback,1)),e*=5):this.isInAccSpeedState&&(this.unschedule(this.hintCallback),this.isInAccSpeedState=!1,this.schedule(this.hintCallback,2)),this.showHint(r.formatNum(String(e)))},this.schedule(this.hintCallback,2)},t.prototype.start=function(){},t.prototype.initKnifeHC=function(e){this.mKnifeHCItem||(this.mKnifeHCItem=new s.default(e))},t.prototype.showHint=function(e){if(this.node.active){var t=cc.instantiate(this.hintPrefab);t.setParent(this.node),t.getComponent(cc.Label).string=e;var i=cc.callFunc(function(){this.destroy()},t),n=cc.spawn(cc.moveBy(2,new cc.Vec2(0,200)),cc.fadeOut(2));n.easing(cc.easeQuarticActionOut());var a=cc.sequence(n,cc.moveBy(.1,new cc.Vec2(0,-200)),i);t.runAction(a)}},t.prototype._onTouchStart=function(e){var t=e.getLocation(),i=(this.node.convertToNodeSpaceAR(t),this.node.getParent().getParent().getParent()),n=this.node.getChildByName("knife");this._movingKnife=cc.instantiate(n),this._movingKnife.setParent(i),this._movingKnife.zIndex=99,this._start_pos=n.convertToWorldSpaceAR(cc.Vec2.ZERO),this._start_pos.x-=10,this._start_pos.y+=10,this._movingKnife.position=this._movingKnife.getParent().convertToNodeSpaceAR(this._start_pos),this.node.getChildByName("knife").opacity=100,this._hechengScript._updateGridState(this.mKnifeHCItem.level)},t.prototype._onTouchMove=function(e){var t=e.getDelta();this._start_pos.x+=t.x,this._start_pos.y+=t.y,this._movingKnife.position=this._movingKnife.getParent().convertToNodeSpaceAR(this._start_pos),this.node.getChildByName("knife").opacity=100},t.prototype._onTouchEnd=function(e){console.log("_onTouchEnd"),this._checkHitOther(),this._checkHitDisplay(),this._recycleWeapen(),this.node.getChildByName("knife").opacity=255,this._movingKnife.destroy(),this._hechengScript._restoreGridState()},t.prototype._onTouchCancel=function(e){console.log("_onTouchCancel"),this._checkHitOther(),this._checkHitDisplay(),this._recycleWeapen(),this.node.getChildByName("knife").opacity=255,this._movingKnife.destroy(),this._hechengScript._restoreGridState()},t.prototype._checkHitOther=function(){for(var e=this.node.getParent().getParent(),t=0,i=e.children.length;t<i;t++){var n=e.children[t],a=n.getChildByName("knifeItemHC");if(a!==this.node){var o=n.getBoundingBoxToWorld(),r=this._movingKnife.getBoundingBoxToWorld();if(o.contains(r.center)){console.log("======\u53d1\u751f\u78b0\u649e=====");var s=this.mKnifeHCItem.level;if(a){var c=a.getComponent("KnifeHC").mKnifeHCItem.level,l=a.getChildByName("knife");c===s&&cc.tween(l).to(.1,{scale:1.5}).to(.1,{scale:1}).start()}var h=this._combWeapen(this.node.getParent().getParent().children.indexOf(n),this.node.getParent().getParent().children.indexOf(this.node.getParent()));if(1==h&&a){var d=a.getComponent("KnifeHC").getComponent(cc.ParticleSystem);d.node.zIndex=10,d.resetSystem()}else if(0==h&&a){var p=this.node.getParent().getParent().getParent();l=a.getChildByName("knife");this.runSwapAnim(this.node.getChildByName("knife"),l,p)}return}}}},t.prototype._combWeapen=function(e,t){console.log("\u5408\u6210\u64cd\u4f5c");var i=-1;return e>=0&&t>=0&&(i=this._hechengScript._combWeapen(e,t)),i},t.prototype._checkHitDisplay=function(){var e=this.node.getParent().getParent().getParent(),t=e.getChildByName("displayBg"),i=t.getBoundingBoxToWorld(),n=t.getChildByName("knifeDisplay"),a=t.getChildByName("boomPlist"),o=this._movingKnife.getBoundingBoxToWorld();if(i.contains(o.center)){console.log("======display\uff0c\u53d1\u751f\u78b0\u649e====="),cc.tween(n).to(.1,{scale:1.3}).to(.1,{scale:1}).start();var r=this.node.getParent().getParent().children.indexOf(this.node.getParent()),s=this._hechengScript._swapDisplay(r,-1);if(1==s){console.log("\u5408\u6210display\u64cd\u4f5c\u6210\u529f");var c=a.getComponent(cc.ParticleSystem);c.node.zIndex=10,c.resetSystem()}else 0==s?(console.log("\u4e0edisplay\u6362\u4f4d"),this.runSwapAnim(this.node.getChildByName("knife"),n,e)):console.log("\u66f4\u6362display\u5931\u8d25\u6216\u53d6\u6d88")}},t.prototype.runSwapAnim=function(e,t,i){var n=cc.instantiate(e);n.setParent(i),e.active=!1,n.position=n.getParent().convertToNodeSpaceAR(e.convertToWorldSpaceAR(cc.Vec2.ZERO)),n.zIndex=99;var a=n.position,o=cc.instantiate(t);o.setParent(i),t.active=!1,o.position=o.getParent().convertToNodeSpaceAR(t.convertToWorldSpaceAR(cc.Vec2.ZERO)),o.zIndex=99;var r=o.position;cc.tween(n).to(.2,{position:r},{easing:"sineInOut"}).call(function(){n.destroy(),e.active=!0,cc.tween(e).to(.1,{scale:1.5}).to(.1,{scale:1}).start()}).start(),cc.tween(o).to(.2,{position:a},{easing:"sineInOut"}).call(function(){o.destroy(),t.active=!0,cc.tween(t).to(.1,{scale:1.5}).to(.1,{scale:1}).start()}).start()},t.prototype._recycleWeapen=function(){var e=this.node.getParent().getParent().getParent().getChildByName("bottombar").getChildByName("bin"),t=e.getBoundingBoxToWorld(),i=this._movingKnife.getBoundingBoxToWorld();if(t.contains(i.center)){cc.tween(e).to(.1,{scale:1.1}).to(.1,{scale:1}).start();var n=this.node.getParent().getParent().children.indexOf(this.node.getParent());this._hechengScript._confrimRecoveryWp(n)?console.log("\u56de\u6536\u64cd\u4f5c\u6210\u529f"):console.log("\u56de\u6536\u5931\u8d25\u6216\u53d6\u6d88")}},t.prototype.setKnifeData=function(e,t){this.mKnifeHCItem.level=e,this.node.getChildByName("level").getChildByName("levelText").getComponent(cc.Label).string=this.mKnifeHCItem.level.toString(),this.mKnifeHCItem.icon=t,this.node.getChildByName("knife").getComponent(cc.Sprite).spriteFrame=t},__decorate([o(cc.Prefab)],t.prototype,"hintPrefab",void 0),t=__decorate([a],t)}(cc.Component);i.default=c,cc._RF.pop()},{"../Script/KnifeHCItem":"KnifeHCItem","../Script/util/BigNumUtil":"BigNumUtil"}],KnifeMove:[function(e,t,i){"use strict";cc._RF.push(t,"14849xx0E5EOb9gxQ8FpD52","KnifeMove"),cc.Class({extends:cc.Component,properties:{Speed:400},start:function(){this.node.runAction(cc.moveBy(1,0,this.Speed).repeatForever())}}),cc._RF.pop()},{}],MultiResoultionCompat:[function(e,t,i){"use strict";cc._RF.push(t,"1703ahToE9Ft7tsWVXJq4ig","MultiResoultionCompat"),Object.defineProperty(i,"__esModule",{value:!0});var n=cc._decorator,a=n.ccclass,o=(n.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var i;return __extends(t,e),i=t,t.prototype.onLoad=function(){cc.view.setDesignResolutionSize(i.DEFAULT_RESOLUTION_WIDTH,i.DEFAULT_RESOLUTION_HEIGHT,cc.ResolutionPolicy.SHOW_ALL)},t.getShowAllModeScale=function(){return Math.min(cc.view.getCanvasSize().width/this.DEFAULT_RESOLUTION_WIDTH,cc.view.getCanvasSize().height/this.DEFAULT_RESOLUTION_HEIGHT)},t.getShowAllModeRealHeight=function(){return this.DEFAULT_RESOLUTION_HEIGHT*this.getShowAllModeScale()},t.getShowAllModeRealWidth=function(){return this.DEFAULT_RESOLUTION_WIDTH*this.getShowAllModeScale()},t.getShowAllModeVerticalBorderHeight=function(){return cc.view.getCanvasSize().height-this.getShowAllModeRealHeight()},t.getShowAllModeHorizontalBorderWidth=function(){return cc.view.getCanvasSize().width-this.getShowAllModeRealWidth()},t.getShowAllModeNodePositionCloseToBottom=function(e){var t=i.getShowAllModeScale(),n=i.getShowAllModeVerticalBorderHeight()/2,a=(e.y*t-n)/t;return cc.v2(e.x,a)},t.convertNodePosInDesignToNodePosInCanvas=function(e){return e.sub(cc.v2(this.getShowAllModeScale(),this.getShowAllModeScale()))},t.convertNodePosInCanvasToNodePosInDesign=function(e){return e.div(cc.v2(this.getShowAllModeScale(),this.getShowAllModeScale()))},t.convertWidthInDesignToWidthInCanvas=function(e){return e*this.getShowAllModeScale()},t.convertWidthInCanvasToWidthInDesign=function(e){return e/this.getShowAllModeScale()},t.convertHeightInDesignToHeightInCanvas=function(e){return e*this.getShowAllModeScale()},t.convertHeightInCanvasToHeightInDesign=function(e){return e/this.getShowAllModeScale()},t.DEFAULT_RESOLUTION_WIDTH=720,t.DEFAULT_RESOLUTION_HEIGHT=1280,t=i=__decorate([a],t)}(cc.Component));i.default=o,cc._RF.pop()},{}],ProfileManager:[function(e,t,i){"use strict";cc._RF.push(t,"416becx7URNdIbsaHV3sSne","ProfileManager");var n=e("../Script/util/BigNumUtil");cc.Class({extends:cc.Component,properties:{score:{type:cc.Integer,default:0},stage:{type:cc.Integer,default:1},coins:{type:cc.Integer,default:0},knifeCommonShadow:cc.SpriteFrame,knifeItemSpriteFrame:{type:cc.SpriteFrame,default:[]},_sound:{type:cc.Integer,default:1},_incCoins:{type:cc.Integer,default:0},_CoinsHC:"0",_Stone:"0",_autoMergeTime:0,_autoMergeStarted:!1,_autoMergeFunction:cc.CallFunc,_accSpeedTime:0,_accSpeedStarted:!1,_offlineFlag:!0,_isFirstTime:!1,_freeAutoMergeUsed:!1,_freeAccSpeedUsed:!1},onLoad:function(){cc.game.addPersistRootNode(this.node);var e=cc.sys.localStorage.getItem("sound");null==e&&(cc.sys.localStorage.setItem("sound",1),e=1),this._sound=e},start:function(){},scheduleAutoMerge:function(e){this._autoMergeFunction=e,this._autoMergeTime>0&&0==this._autoMergeStarted&&(this.schedule(function(){this._autoMergeTime>0?(this._autoMergeTime-=1,this._autoMergeFunction&&this._autoMergeFunction()):(this._autoMergeTime=0,this._autoMergeStarted=!1)},1,this._autoMergeTime,0),this._autoMergeStarted=!0)},scheduleAccSpeed:function(){this._accSpeedTime>0&&0==this._accSpeedStarted&&(this.schedule(function(){this._accSpeedTime>0?this._accSpeedTime-=1:this._accSpeedStarted=!1},1,this._accSpeedTime-1,0),this._accSpeedStarted=!0)},startCoinsProduction:function(){if(!this.hasStarted){this.hasStarted=!0;var e=this;this.schedule(function(){e._CoinsHC=n.numAdd(e._CoinsHC,String(e._incCoins))},1)}},resetData:function(){this.score=0,this.stage=0}}),cc._RF.pop()},{"../Script/util/BigNumUtil":"BigNumUtil"}],Rank:[function(e,t,i){"use strict";cc._RF.push(t,"1912dW5nx1L275S82WOA9da","Rank");var n=e("../Script/http/HttpUtil");cc.Class({extends:cc.Component,properties:{rankBgSprite:cc.Sprite,tabBgSprite:cc.Sprite,toggle1CmSprite:cc.Sprite,toggle2CmSprite:cc.Sprite,toggleScoreLabel:cc.Label,toggleKnifeLabel:cc.Label,bannerBgSprite:cc.Sprite,bannerLabel:cc.Label,switchLabel:cc.Label,playAgainButton:cc.Button,playAgainLabel:cc.Label,playAgainSprite:cc.Sprite,switchRankButton:cc.Button,switchRankSprite:cc.Sprite,pkButton:cc.Button,pkSprite:cc.Sprite,closeBtnSprite:cc.Sprite},onLoad:function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),this.resManager=cc.find("ResManager").getComponent("ResManager"),this.rankBgSprite.spriteFrame=this.resManager.getLoadedResData("rankBgImg"),this.tabBgSprite.spriteFrame=this.resManager.getLoadedResData("rankTabBgImg"),this.toggle1CmSprite.spriteFrame=this.resManager.getLoadedResData("rankTabSelectedImg"),this.toggle2CmSprite.spriteFrame=this.resManager.getLoadedResData("rankTabSelectedImg"),this.bannerBgSprite.spriteFrame=this.resManager.getLoadedResData("rankHintBgImg"),this.playAgainSprite.spriteFrame=this.resManager.getLoadedResData("rankBtnGreenImg"),this.switchRankSprite.spriteFrame=this.resManager.getLoadedResData("rankBtnWhiteImg"),this.pkSprite.spriteFrame=this.resManager.getLoadedResData("rankBtnBlueImg"),this.closeBtnSprite.spriteFrame=this.resManager.getLoadedResData("rankCloseImg"),this.isScoreRank=!0,this.isFriendRank=!0},start:function(){},hideDialog:function(){var e=cc.find("ProfileManager").getComponent("ProfileManager");this.shareTicket=null,e.shareTicket=null,e.isScoreRank=null,this.node.active=!1},clickScoreTab:function(){this.shareTicket?this.bannerLabel.string="\u7fa4\u5f97\u5206\u6392\u884c\u699c":this.isFriendRank?this.bannerLabel.string="\u597d\u53cb\u5f97\u5206\u6392\u884c\u699c":this.bannerLabel.string="\u4e16\u754c\u5f97\u5206\u6392\u884c\u699c",this.toggleKnifeLabel.node.color=new cc.Color(74,172,247),this.toggleScoreLabel.node.color=new cc.Color(255,255,255),this.isScoreRank||(this.isScoreRank=!0,this.getData(this.shareTicket,!0))},clickKnifeTab:function(){this.shareTicket?this.bannerLabel.string="\u7fa4\u98de\u5200\u6392\u884c\u699c":this.isFriendRank?this.bannerLabel.string="\u597d\u53cb\u98de\u5200\u6392\u884c\u699c":this.bannerLabel.string="\u4e16\u754c\u98de\u5200\u6392\u884c\u699c",this.toggleScoreLabel.node.color=new cc.Color(74,172,247),this.toggleKnifeLabel.node.color=new cc.Color(255,255,255),this.isScoreRank&&(this.isScoreRank=!1,this.getData(this.shareTicket,!1))},clickSwitchRank:function(){this.isFriendRank=!this.isFriendRank,this.isFriendRank?(this.isScoreRank?this.bannerLabel.string="\u597d\u53cb\u5173\u5361\u6392\u884c\u699c":this.bannerLabel.string="\u597d\u53cb\u98de\u5200\u6392\u884c\u699c",this.switchLabel.string="\u4e16\u754c\u699c\u5355"):(this.isScoreRank?this.bannerLabel.string="\u4e16\u754c\u5173\u5361\u6392\u884c\u699c":this.bannerLabel.string="\u4e16\u754c\u98de\u5200\u6392\u884c\u699c",this.switchLabel.string="\u597d\u53cb\u699c\u5355"),this.getData()},clickPK:function(){var e=this;wx.updateShareMenu({withShareTicket:!0}),wx.shareAppMessage({query:"isScoreRank="+e.isScoreRank,title:"\u5feb\u6765\u8ddf\u6211\u4e00\u8d77\u800d\u98de\u5200\u5427\u3002",imageUrlId:"id",imageUrl:baseURL+"res/Texture/share.jpg",success:function(t){void 0!=t.shareTickets&&t.shareTickets.length>0&&(e.isScoreRank?wx.postMessage({event:"getScoreFriendGroup",shareTicket:t.shareTickets[0]}):wx.postMessage({event:"getKnifeFriendGroup",shareTicket:t.shareTickets[0]}))}}),this.hideDialog()},clickPlay:function(){cc.director.loadScene("game/game"),this.hideDialog()},setMyRankScore:function(e){var t={};e[0].order?t.order=e[0].order:t.order="/",t.nickName=e[0].nickName,e[0].hightestLevel?t.hightestLevel=e[0].hightestLevel:t.hightestLevel="/",e[0].hightestCreatedKnife?t.hightestCreatedKnife=e[0].hightestCreatedKnife:t.hightestCreatedKnife="1",t.avatarUrl=e[0].avatarUrl,wx.postMessage({event:"setWorldMyData",myData:t})},setBackupData:function(e){var t={order:"/"};t.nickName=e[0].nickName,e[0].hightestStage?t.hightestStage=e[0].hightestStage:t.hightestStage="/",e[0].hightestCreatedKnife?t.hightestCreatedKnife=e[0].hightestCreatedKnife:t.hightestCreatedKnife="1",t.avatarUrl=e[0].avatarUrl,wx.postMessage({event:"setBackupMyData",myData:t})},setMyRankKnife:function(e){switch(e[0].order?this.myRankLabel.string=e[0].order:this.myRankLabel.string="/",this.myNicknameLabel.string=e[0].nickName,this.myScoreLabel.string=e[0].ownKnifeCount,this.updateAvatar(e[0].avatarUrl),this.myRankKnifeSprite.node.opacity=255,this.myRankLabel.string){case"1":this.myRankImg.node.active=!0,this.myRankImg.spriteFrame=this.rankingImgFirst;break;case"2":this.myRankImg.node.active=!0,this.myRankImg.spriteFrame=this.rankingImgSecond;break;case"3":this.myRankImg.node.active=!0,this.myRankImg.spriteFrame=this.rankingImgThrid;break;default:this.myRankImg.node.active=!1}},getData:function(e,t){this.resManager=cc.find("ResManager").getComponent("ResManager"),this.rankBgSprite.spriteFrame=this.resManager.getLoadedResData("rankBgImg"),this.shareTicket=e,e?(this.switchRankButton.node.active=!1,this.pkButton.node.active=!1,this.playAgainLabel.string="\u73a9\u4e00\u6b21",t?(this.bannerLabel.string="\u7fa4\u5f97\u5206\u6392\u884c\u699c",this.getGroupRankScore(e)):(this.bannerLabel.string="\u7fa4\u98de\u5200\u6392\u884c\u699c",this.getGroupRankKnife(e))):(this.switchRankButton.node.active=!0,this.pkButton.node.active=!0,this.playAgainLabel.string="\u518d\u73a9\u4e00\u6b21",this.isFriendRank&&this.isScoreRank?this.getFriendRankScore():this.isFriendRank&&!this.isScoreRank?this.getFriendRankKnife():!this.isFriendRank&&this.isScoreRank?this.getWorldRankStage():this.isFriendRank||this.isScoreRank||this.getWorldRankKnife())},getGroupRankScore:function(e){var t=this,i=cc.find("ProfileManager").getComponent("ProfileManager");wx.postMessage({event:"getScoreFriendGroup",shareTicket:e}),n.getMyRankStage({openId:i.openId},function(e){t.setBackupData(e)},function(e){console.log("getMyRankScore fail:",e)})},getGroupRankKnife:function(e){var t=this,i=cc.find("ProfileManager").getComponent("ProfileManager");wx.postMessage({event:"getKnifeFriendGroup",shareTicket:e}),n.getMyRankKnife({openId:i.openId},function(e){t.setMyRankKnife(e)},function(e){console.log("getMyRankKnife fail:",e)})},getFriendRankScore:function(){var e=this,t=cc.find("ProfileManager").getComponent("ProfileManager");wx.postMessage({event:"getScoreRank"}),n.getMyRankStage({openId:t.openId},function(t){e.setBackupData(t)},function(e){console.log("getMyRankScore fail:",e)})},getFriendRankKnife:function(){var e=this,t=cc.find("ProfileManager").getComponent("ProfileManager");wx.postMessage({event:"getKnifeRank"}),n.getMyRankKnife({openId:t.openId},function(t){e.setMyRankKnife(t)},function(e){console.log("getMyRankKnife fail:",e)})},getWorldRankStage:function(){var e=this,t=cc.find("ProfileManager").getComponent("ProfileManager");n.getWorldRankStage({openId:t.openId},function(e){wx.postMessage({event:"setWorldScoreRank",scoreList:e})},function(e){console.log("getProfileInfo fail:",e)}),n.getMyRankStage({openId:t.openId},function(t){e.setMyRankScore(t)},function(e){console.log("getMyRankScore fail:",e)})},getWorldRankKnife:function(){var e=this,t=cc.find("ProfileManager").getComponent("ProfileManager");n.getWorldRankKnifeCount({openId:t.openId},function(e){wx.postMessage({event:"setWorldKnifeRank",knifeCountList:e})},function(e){console.log("getProfileInfo fail:",e)}),n.getMyRankKnife({openId:t.openId},function(t){e.setMyRankKnife(t)},function(e){console.log("getProfileInfo fail:",e)})},updateAvatar:function(e){var t=this,i=wx.createImage();i.onload=function(){var e=new cc.Texture2D;e.initWithElement(i),e.handleLoadedTexture(),t.myAvatarSprite.spriteFrame=new cc.SpriteFrame(e)},i.src=e},onKeyDown:function(e){switch(console.log("onKeyDown event.keyCode:",e.keyCode),e.keyCode){case cc.macro.KEY.back:this.node.active&&this.hideDialog()}},onDestroy:function(){cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this)}}),cc._RF.pop()},{"../Script/http/HttpUtil":"HttpUtil"}],ResLoading:[function(e,t,i){"use strict";cc._RF.push(t,"692e5ET3ZhKkal2sgM2Mcj8","ResLoading");e("../../Script/util/CommonUtil");cc.Class({extends:cc.Component,properties:{progressBar:{default:null,type:cc.ProgressBar},progressTips:{default:null,type:cc.Label},networkDialog:cc.Node,knifeSprite:cc.Sprite,knifeItemSpriteFrame:{type:cc.SpriteFrame,default:[]}},onLoad:function(){this.profileManager=cc.find("ProfileManager").getComponent("ProfileManager"),this.resManager=cc.find("ResManager").getComponent("ResManager"),this.startDownload(),this.runKnifeAnim()},runKnifeAnim:function(){var e=this,t=this.knifeSprite.node.position,i=this.knifeSprite.node.parent.width,n=0,a=cc.tween().to(1,{position:cc.v2(this.knifeSprite.node.x+i/4,this.knifeSprite.node.y)}),o=cc.tween().to(.6,{position:cc.v2(this.knifeSprite.node.x+i+this.knifeSprite.node.height,this.knifeSprite.node.y)},{easing:"quartIn"}),r=cc.tween().to(.5,{position:cc.v2(this.knifeSprite.node.x+i+this.knifeSprite.node.height+1,this.knifeSprite.node.y)});cc.tween(this.knifeSprite.node).repeatForever(cc.tween().then(a).then(o).then(r).call(function(){e.knifeSprite.node.position=t,n++,e.knifeSprite.spriteFrame=e.knifeItemSpriteFrame[n%5]})).start()},startDownload:function(){if(this.networkDialog.active=!1,this.resource=null,this.progressBar.progress=0,this._clearAll(),!this.resource){var e=this.resManager.getAllDownloadUrls();this.download(e.length,e,0,0)}},download:function(e,t,i,n){var a=this,o=this.resManager;t.forEach(function(t,n){a.resource=t,o.setResData(t),i++,a.progress=i/e,1==a.progress&&cc.director.loadScene("hecheng/hecheng")})},_clearAll:function(){},_progressCallback:function(e,t,i){this.progress=e/t,this.resource=i,this.completedCount=e,this.totalCount=t,this.resManager.setResData(i),console.log("_progressCallback this.progress:",this.progress),1==this.progress&&cc.director.loadScene("hecheng/hecheng")},_completeCallback:function(e,t){console.log("_completeCallback res:",t)},update:function(e){if(this.resource){var t=this.progressBar.progress;t>=1?this.progressBar.node.active=!1:(t<this.progress&&(t+=e)>1&&(t=1),this.progressBar.progress=t,this.progressTips.string=Number(100*this.progressBar.progress).toFixed(0)+"%")}}}),cc._RF.pop()},{"../../Script/util/CommonUtil":"CommonUtil"}],ResManager:[function(e,t,i){"use strict";cc._RF.push(t,"0cc4dyBvuBNIKAn2TNS0K+Q","ResManager");e("../Script/http/HttpUtil");cc.Class({extends:cc.Component,properties:{_res:{default:null,type:Array}},onLoad:function(){cc.game.addPersistRootNode(this.node),this._res=[{key:"circleImg",value:{request:{url:baseURL+"res/Texture/circle.png"},data:null}},{key:"bg0Img",value:{request:{url:baseURL+"res/Texture/bg0.jpg"},data:null}},{key:"bg1Img",value:{request:{url:baseURL+"res/Texture/bg1.jpg"},data:null}},{key:"loginBtnImg",value:{request:{url:baseURL+"res/Texture/login_btn.png"},data:null}},{key:"titleBgImg",value:{request:{url:baseURL+"res/Texture/title_bg.png"},data:null}},{key:"lineShadowImg",value:{request:{url:baseURL+"res/Texture/line_shadow.png"},data:null}},{key:"autoMergeImg",value:{request:{url:baseURL+"res/Texture/ad_video.png"},data:null}},{key:"btnSixBgImg",value:{request:{url:baseURL+"res/Texture/btn_six_bg.png"},data:null}},{key:"gridBgImg",value:{request:{url:baseURL+"res/Texture/grid_bg.png"},data:null}},{key:"hpBgImg",value:{request:{url:baseURL+"res/Texture/hp_bg.png"},data:null}},{key:"hpBarBgImg",value:{request:{url:baseURL+"res/Texture/hp_bar_bg.png"},data:null}},{key:"hpBarImg",value:{request:{url:baseURL+"res/Texture/hp_bar.png"},data:null}},{key:"battleImg",value:{request:{url:baseURL+"res/Texture/icon_battle.png"},data:null}},{key:"energyImg",value:{request:{url:baseURL+"res/Texture/icon_energy.png"},data:null}},{key:"roundBtnBgImg",value:{request:{url:baseURL+"res/Texture/roundBtnBg.png"},data:null}},{key:"stageIconImg",value:{request:{url:baseURL+"res/Texture/stage_icon.png"},data:null}},{key:"shoubingImg",value:{request:{url:baseURL+"res/Texture/shoubing.png"},data:null}},{key:"rankIconImg",value:{request:{url:baseURL+"res/Texture/rank_icon.png"},data:null}},{key:"yellowFrameImg",value:{request:{url:baseURL+"res/Texture/yellow_frame.png"},data:null}},{key:"rankCloseImg",value:{request:{url:baseURL+"res/Texture/rank/close.png"},data:null}},{key:"rankKnifeIconImg",value:{request:{url:baseURL+"res/Texture/rank/knife_icon.png"},data:null}},{key:"rankMyBgImg",value:{request:{url:baseURL+"res/Texture/rank/rank_my_bg.png"},data:null}},{key:"rankMyLeftBgImg",value:{request:{url:baseURL+"res/Texture/rank/rank_my_left_bg.png"},data:null}},{key:"rankTabBgImg",value:{request:{url:baseURL+"res/Texture/rank/tab_bg.png"},data:null}},{key:"rankBgImg",value:{request:{url:baseURL+"res/Texture/rank/rank_bg.png"},data:null}},{key:"rankBtnBlueImg",value:{request:{url:baseURL+"res/Texture/rank/btn_blue.png"},data:null}},{key:"rankBtnGreenImg",value:{request:{url:baseURL+"res/Texture/rank/btn_green.png"},data:null}},{key:"rankBtnWhiteImg",value:{request:{url:baseURL+"res/Texture/rank/btn_white.png"},data:null}},{key:"rankHintBgImg",value:{request:{url:baseURL+"res/Texture/rank/hint_bg.png"},data:null}},{key:"rankTabSelectedImg",value:{request:{url:baseURL+"res/Texture/rank/tab_selected.png"},data:null}},{key:"stage5TrunkImg",value:{request:{url:baseURL+"res/Texture/challenges/stage_trunk_5.png"},data:null}},{key:"stage10TrunkImg",value:{request:{url:baseURL+"res/Texture/challenges/stage_trunk_10.png"},data:null}},{key:"stage15TrunkImg",value:{request:{url:baseURL+"res/Texture/challenges/stage_trunk_15.png"},data:null}},{key:"stage20TrunkImg",value:{request:{url:baseURL+"res/Texture/challenges/stage_trunk_20.png"},data:null}},{key:"stage25TrunkImg",value:{request:{url:baseURL+"res/Texture/challenges/stage_trunk_25.png"},data:null}},{key:"stage30TrunkImg",value:{request:{url:baseURL+"res/Texture/challenges/stage_trunk_30.png"},data:null}},{key:"stage35TrunkImg",value:{request:{url:baseURL+"res/Texture/challenges/stage_trunk_35.png"},data:null}},{key:"stage40TrunkImg",value:{request:{url:baseURL+"res/Texture/challenges/stage_trunk_40.png"},data:null}},{key:"stage45TrunkImg",value:{request:{url:baseURL+"res/Texture/challenges/stage_trunk_45.png"},data:null}},{key:"stage50TrunkImg",value:{request:{url:baseURL+"res/Texture/challenges/stage_trunk_50.png"},data:null}}]},getAllDownloadUrls:function(){var e=[];return this._res.forEach(function(t,i){e.push(t.value.request.url)}),e},setResData:function(e){var t=e;console.log("setResData url:",t);var i=this._res.filter(function(e,i,n){return e.value.request.url==t})[0];cc.loader.loadRes(t,cc.SpriteFrame,function(e,t){i.value.data=t})},getLoadedResData:function(e){return this._res.filter(function(t,i,n){return t.key==e})[0].value.data}}),cc._RF.pop()},{"../Script/http/HttpUtil":"HttpUtil"}],ShopItem:[function(e,t,i){"use strict";cc._RF.push(t,"56f43dvJgtA6pN9MLjGHED3","ShopItem"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../Script/util/BigNumUtil"),a=cc._decorator,o=a.ccclass,r=a.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.lockNode=null,t.lvNode=null,t.lvLabel=null,t.frameSprite=null,t.knifeSprite=null,t.adBtnNode=null,t.buyIconSprite=null,t.buyPriceLabel=null,t.coinSpriteFrame=null,t.stoneSpriteFrame=null,t}return __extends(t,e),t.prototype.onLoad=function(){this.resManager=cc.find("ResManager").getComponent("ResManager"),this.frameSprite.spriteFrame=this.resManager.getLoadedResData("yellowFrameImg")},t.prototype.start=function(){},t.prototype.setData=function(e,t,i,a,o,r,s){this.lv=t,this.isStoneBuy=a,this.isLock=e,this.showAd=r,this.canBuy=s,this.price=o,1==e?(this.lockNode.active=!0,this.lvNode.active=!1):(this.lockNode.active=!1,this.lvNode.active=!0,this.lvLabel.string=String(t)),this.buyIconSprite.spriteFrame=1==a?this.stoneSpriteFrame:this.coinSpriteFrame,this.adBtnNode.active=1==r,this.buyPriceLabel.string=1==s?n.formatNum(String(o)):"???",this.knifeSprite.spriteFrame=i},t.prototype.clickBuy=function(){if(1!=this.isLock&&0!=this.canBuy){var e=new cc.Event.EventCustom("onShopBuy",!0),t={};t.lv=this.lv,t.price=this.price,1==this.isStoneBuy?t.buyWay="stone":t.buyWay="coin",e.setUserData(t),this.node.dispatchEvent(e)}},t.prototype.clickAd=function(){var e=new cc.Event.EventCustom("onShopBuy",!0),t={};t.lv=this.lv,t.price=this.price,t.buyWay="ad",e.setUserData(t),this.node.dispatchEvent(e),this.adBtnNode.active=!1},__decorate([r(cc.Node)],t.prototype,"lockNode",void 0),__decorate([r(cc.Node)],t.prototype,"lvNode",void 0),__decorate([r(cc.Label)],t.prototype,"lvLabel",void 0),__decorate([r(cc.Sprite)],t.prototype,"frameSprite",void 0),__decorate([r(cc.Sprite)],t.prototype,"knifeSprite",void 0),__decorate([r(cc.Node)],t.prototype,"adBtnNode",void 0),__decorate([r(cc.Sprite)],t.prototype,"buyIconSprite",void 0),__decorate([r(cc.Label)],t.prototype,"buyPriceLabel",void 0),__decorate([r(cc.SpriteFrame)],t.prototype,"coinSpriteFrame",void 0),__decorate([r(cc.SpriteFrame)],t.prototype,"stoneSpriteFrame",void 0),t=__decorate([o],t)}(cc.Component);i.default=s,cc._RF.pop()},{"../Script/util/BigNumUtil":"BigNumUtil"}],ShopListManager:[function(e,t,i){"use strict";cc._RF.push(t,"633e8IkEDVJvaNloLOslXAE","ShopListManager"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./ShopItem"),a=e("../Script/util/BigNumUtil"),o=cc._decorator,r=o.ccclass,s=o.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.contentNode=null,t.itemPrefab=null,t}return __extends(t,e),t.prototype.onLoad=function(){this.profileManager=cc.find("ProfileManager").getComponent("ProfileManager"),console.log("onLoad  profileManager:",this.profileManager)},t.prototype.start=function(){this.profileManager=cc.find("ProfileManager").getComponent("ProfileManager"),console.log("start  profileManager:",this.profileManager)},t.prototype.loadData=function(e){this.contentNode.removeAllChildren(!0),this.profileManager||(this.profileManager=cc.find("ProfileManager").getComponent("ProfileManager"));var t=1;e-4>1&&(t=e-4);for(var i=Math.max(t-2,1),o=1;o<=i;o++){(l=cc.instantiate(this.itemPrefab)).setParent(this.contentNode);var r=this.profileManager.knifeItemSpriteFrame[o-1],s=a.getTargetPrice(this.totalProduction,e,o);l.getComponent(n.default).setData(!1,o,r,!1,s,!1,!0)}for(o=1;o<=4;o++){(l=cc.instantiate(this.itemPrefab)).setParent(this.contentNode);r=this.profileManager.knifeItemSpriteFrame[i+o-1],s=25;var c=!1;switch(o){case 1:s=8;break;case 2:s=10;break;case 3:s=15;break;case 4:s=25,this.profileManager.canAdBuy&&(c=!0)}l.getComponent(n.default).setData(!1,i+o,r,!0,s,c,!0)}for(o=3;o<=4;o++){(l=cc.instantiate(this.itemPrefab)).setParent(this.contentNode);r=this.profileManager.knifeItemSpriteFrame[t+o-1],s=0;l.getComponent(n.default).setData(!1,t+o,r,!1,s,!1,!1)}for(o=1;o<=2;o++){var l;(l=cc.instantiate(this.itemPrefab)).setParent(this.contentNode);r=this.profileManager.knifeCommonShadow;l.getComponent(n.default).setData(!0,0,r,!1,0,!1,!1)}},__decorate([s(cc.Node)],t.prototype,"contentNode",void 0),__decorate([s(cc.Prefab)],t.prototype,"itemPrefab",void 0),t=__decorate([r],t)}(cc.Component);i.default=c,cc._RF.pop()},{"../Script/util/BigNumUtil":"BigNumUtil","./ShopItem":"ShopItem"}],Trunk:[function(e,t,i){"use strict";cc._RF.push(t,"b9675dTpTFH7IHXfe0jsI6Z","Trunk"),cc.Class({extends:cc.Component,properties:{gameComponent:{type:cc.Node,default:null}},start:function(){this.gameScript=this.gameComponent.getComponent("Game")},onCollisionEnter:function(e,t){if(0==e.tag)if("PresetKnife"!==e.node.group&&"Apple"!==e.node.group){var i=this.node.parent.rotation,n=(n=cc.v2(0,-300)).rotate(i*Math.PI/180);e.node.stopAllActions(),e.node.group="UsedKnife",e.node.parent=this.node.parent,e.node.position=n,e.node.rotation=-i,e.node.zIndex=-1,this.gameScript.onScore(),console.log("onScore")}else"PresetKnife"===e.node.group&&(e.node.group="UsedKnife"),e.node.stopAllActions(),e.node.parent=this.node.parent,e.node.zIndex=-1}}),cc._RF.pop()},{}],aesutil:[function(e,t,i){"use strict";cc._RF.push(t,"7aa22klb4xH36+PZFScfDxR","aesutil");var n=e("CryptoJS"),a=n.CryptoJS.enc.Utf8.parse("6dF782Hho99uy23V"),o=n.CryptoJS.enc.Utf8.parse("Ng8l2D7ixO2dUe64");t.exports={encrypt:function(e){var t=Array.from(e);t.sort(function(e,t){return e[0].localeCompare(t[0])});var i="";new Map(t.map(function(e){return[e[0],e[1]]})).forEach(function(e,t,n){""!=i&&(i+="&&"),i=i+t+"::"+e});var r=n.CryptoJS.enc.Utf8.parse(i);return n.CryptoJS.AES.encrypt(r,a,{iv:o,mode:n.CryptoJS.mode.ECB,padding:n.CryptoJS.pad.Pkcs7}).toString()},decrypt:function(e){var t=n.CryptoJS.AES.decrypt(e,a,{iv:o,mode:n.CryptoJS.mode.ECB,padding:n.CryptoJS.pad.Pkcs7}).toString(n.CryptoJS.enc.Utf8);return JSON.parse(t)}},cc._RF.pop()},{CryptoJS:"CryptoJS"}],hecheng:[function(e,t,i){"use strict";cc._RF.push(t,"a32daGPmTZGQoFdh0kPWtYQ","hecheng");var n=function(e){return e&&e.__esModule?e:{default:e}}(e("../../Script/KnifeHCItem"));var a=e("../../Script/http/HttpUtil"),o=e("../../Script/util/BigNumUtil"),r=e("../../Script/util/CommonUtil");cc.Class({extends:cc.Component,properties:{coinsLabel:{type:cc.Label,default:null},stoneLabel:cc.Label,audioLogo:{type:cc.AudioSource,default:null},audioGift:{type:cc.AudioSource,default:null},soundOnSpriteFrame:cc.SpriteFrame,soundOffSpriteFrame:cc.SpriteFrame,soundSprite:{type:cc.Sprite,default:null},displayKnifeSprite:cc.Sprite,displayKnifeLabel:cc.Label,speedProgressBar:cc.ProgressBar,speedLabel:cc.Label,speedIcon:cc.Sprite,harmProgressBar:cc.ProgressBar,harmLabel:cc.Label,harmIcon:cc.Sprite,roundBtnBg:cc.Sprite,roundBtnIcon:cc.Sprite,buyPriceLabel:cc.Label,buyLvLabel:cc.Label,coinSpeedLabel:cc.Label,bgSprite:cc.Sprite,rankDialogNode:cc.Node,accSpeedBtmSprite:cc.Sprite,rankBtmSprite:cc.Sprite,giftBtmSprite:cc.Sprite,binBtmSprite:cc.Sprite,loginDialog:cc.Node,loginBg:cc.Sprite,loginBtn:cc.Node,loginDescText:cc.Label,loginCloseSprite:cc.Sprite,binPlist:cc.ParticleSystem,hintPrefabSmall:cc.Prefab,hintPrefabBigger:cc.Prefab,giftManagerNode:cc.Node,offlineDialogNode:cc.Node,offlineCoinsLabel:cc.Label,offlineTitleBg:cc.Sprite,coinsNotEnoughDialogNode:cc.Node,coinsNotEnoughCoinsLabel:cc.Label,coinsNotEnoughCoinsCloseBtnSprite:cc.Sprite,coinsNotEnoughCoinsLineSprite:cc.Sprite,stoneDialogNode:cc.Node,stoneDialogCloseBtnSprite:cc.Sprite,stoneGetLeftCountLabel:cc.Label,stoneGetLeftCountLineSprite:cc.Sprite,loadingNode:cc.Node,autoMergeSprite:cc.Sprite,autoMergelabel:cc.Label,accSpeedDialogNode:cc.Node,accSpeedLabel:cc.Label,accSpeedDialogCloseSprite:cc.Sprite,accSpeedDialogLineSprite:cc.Sprite,shopDialog:cc.Node,shopDialogCloseSprite:cc.Sprite,shopHintNode:cc.Node,networkDialog:cc.Node,guideNode:cc.Node,gridAdSprite:cc.Sprite,rankSprite:cc.Sprite,gridLayoutNode:cc.Node,knifeItemHCPrefab:cc.Prefab,_accSpeedStarted:!1,_knifeHCList:[]},onLoad:function(){this.profileManager=cc.find("ProfileManager").getComponent("ProfileManager"),this.resManager=cc.find("ResManager").getComponent("ResManager"),this.bgSprite.spriteFrame=this.resManager.getLoadedResData("bg0Img"),this.autoMergeSprite.spriteFrame=this.resManager.getLoadedResData("autoMergeImg"),this.accSpeedBtmSprite.spriteFrame=this.resManager.getLoadedResData("btnSixBgImg"),this.rankBtmSprite.spriteFrame=this.resManager.getLoadedResData("btnSixBgImg"),this.giftBtmSprite.spriteFrame=this.resManager.getLoadedResData("btnSixBgImg"),this.binBtmSprite.spriteFrame=this.resManager.getLoadedResData("btnSixBgImg"),this.speedIcon.spriteFrame=this.resManager.getLoadedResData("energyImg"),this.harmIcon.spriteFrame=this.resManager.getLoadedResData("rankKnifeIconImg"),this.roundBtnBg.spriteFrame=this.resManager.getLoadedResData("roundBtnBgImg"),this.roundBtnIcon.spriteFrame=this.resManager.getLoadedResData("battleImg"),this.offlineTitleBg.spriteFrame=this.resManager.getLoadedResData("titleBgImg"),this.accSpeedDialogCloseSprite.spriteFrame=this.resManager.getLoadedResData("rankCloseImg"),this.coinsNotEnoughCoinsCloseBtnSprite.spriteFrame=this.resManager.getLoadedResData("rankCloseImg"),this.stoneDialogCloseBtnSprite.spriteFrame=this.resManager.getLoadedResData("rankCloseImg"),this.shopDialogCloseSprite.spriteFrame=this.resManager.getLoadedResData("rankCloseImg"),this.loginBtn.getComponent(cc.Sprite).spriteFrame=this.resManager.getLoadedResData("loginBtnImg"),this.loginCloseSprite.spriteFrame=this.resManager.getLoadedResData("rankCloseImg"),this.coinsNotEnoughCoinsLineSprite.spriteFrame=this.resManager.getLoadedResData("lineShadowImg"),this.stoneGetLeftCountLineSprite.spriteFrame=this.resManager.getLoadedResData("lineShadowImg"),this.accSpeedDialogLineSprite.spriteFrame=this.resManager.getLoadedResData("lineShadowImg"),this.gridAdSprite.spriteFrame=this.resManager.getLoadedResData("shoubingImg"),this.rankSprite.spriteFrame=this.resManager.getLoadedResData("rankIconImg");var e=this.gridLayoutNode.children;for(var t in e)e[t].getComponent(cc.Sprite).spriteFrame=this.resManager.getLoadedResData("gridBgImg");this.rankDialogNode.zIndex=200,this.loginDialog.zIndex=200,this.registerTouchEvent(),this.node.on("onStoneAdd",function(e){console.log("onStoneAdd  event.userData:",e.getUserData()),this.showHintOverlay("+"+o.formatNum(String(e.getUserData())),this.giftManagerNode.getChildByName("gift_label"),!1),1==this.profileManager._sound&&this.audioGift.play()}.bind(this)),this.node.on("onShopBuy",function(e){var t=e.getUserData();if("ad"==t.buyWay){var i=this;r.showVideoAd("5b39b0f45a29111d223cb8b3c99b4f7b",function(){i.buyKnifeInShop(t.buyWay,t.price,t.lv)},function(){i.showNetworkDialog()})}else this.buyKnifeInShop(t.buyWay,t.price,t.lv)}.bind(this)),1==this.profileManager._sound&&this.audioLogo.play(),this._knifeHCList=["1","1","0","0","0","0","0","0","0","0","0","0"],this.initGridData(),this.login(),this.initGetUserInfoButton();var i=this;this.displayKnifeSprite.schedule(function(){i.displayKnifeSprite.node.active&&i.profileManager.displayKnife&&i.showHint(o.formatNum(String(2*o.getProduction(i.profileManager.displayKnife.level))),i.displayKnifeSprite.node.parent,!0)},2)},registerTouchEvent:function(){var e=this.displayKnifeSprite.node.children[0];e.on(cc.Node.EventType.TOUCH_START,this._onTouchStart,this),e.on(cc.Node.EventType.TOUCH_MOVE,this._onTouchMove,this),e.on(cc.Node.EventType.TOUCH_END,this._onTouchEnd,this),e.on(cc.Node.EventType.TOUCH_CANCEL,this._onTouchCancel,this)},_onTouchStart:function(e){var t=this.displayKnifeSprite.node.parent.parent,i=this.displayKnifeSprite.node;this._movingKnife=cc.instantiate(i),this._movingKnife.removeComponent(cc.Animation),this._movingKnife.removeAllChildren(),this._movingKnife.width=44,this._movingKnife.height=200,this._movingKnife.parent=t,this._movingKnife.zIndex=99,this._start_pos=i.convertToWorldSpaceAR(cc.Vec2.ZERO),this._start_pos.x-=10,this._start_pos.y+=10,this._movingKnife.position=this._movingKnife.parent.convertToNodeSpaceAR(this._start_pos),this.displayKnifeSprite.node.opacity=100,this._updateGridState(this.profileManager.displayKnife.level)},_onTouchMove:function(e){var t=e.getDelta();this._start_pos.x+=t.x,this._start_pos.y+=t.y,this._movingKnife.position=this._movingKnife.parent.convertToNodeSpaceAR(this._start_pos),this.displayKnifeSprite.node.opacity=100},_onTouchEnd:function(e){this._checkHitOther(),this._recycleDisplay(),this.displayKnifeSprite.node.opacity=255,this._movingKnife.destroy(),this._restoreGridState()},_onTouchCancel:function(e){this._checkHitOther(),this._recycleDisplay(),this.displayKnifeSprite.node.opacity=255,this._movingKnife.destroy(),this._restoreGridState()},_checkHitOther:function(){for(var e=this.node.getChildByName("content").getChildByName("gridBg"),t=0,i=e.children.length;t<i;t++){var n=e.children[t],a=n.getChildByName("knifeItemHC");a&&!1!==a.active||!0;var o=n.getBoundingBoxToWorld(),r=this._movingKnife.getBoundingBoxToWorld();if(o.contains(r.center)){var s=this._swapDisplay(-1,t);if(a)if(1==s){var c=a.getComponent("KnifeHC").getComponent(cc.ParticleSystem);c.node.zIndex=10,c.resetSystem()}else if(0==s){var l=a.getChildByName("knife");this.runSwapAnim(l,this.displayKnifeSprite.node,this.node.getChildByName("content"))}return}}},_recycleDisplay:function(){var e=this.node.getChildByName("content").getChildByName("bottombar").getChildByName("bin"),t=e.getBoundingBoxToWorld(),i=this._movingKnife.getBoundingBoxToWorld();t.contains(i.center)&&(cc.tween(e).to(.5,{scale:1.5}).to(.5,{scale:1}).start(),this._confrimRecoveryWp(-1)?console.log("\u56de\u6536\u64cd\u4f5c\u6210\u529f"):console.log("\u56de\u6536\u5931\u8d25\u6216\u53d6\u6d88"))},initGridData:function(){for(var e=0,t=this._knifeHCList.length;e<t;e++){var i=Number(this._knifeHCList[e]),n=this.gridLayoutNode.children[e].getChildByName("knifeItemHC");if(i>0){if(!n)n=cc.instantiate(this.knifeItemHCPrefab),this.gridLayoutNode.children[e].addChild(n),n.getComponent("KnifeHC").initKnifeHC(1);n.active=!0,n.getComponent("KnifeHC").setKnifeData(i,this.profileManager.knifeItemSpriteFrame[i-1])}else n&&(n.active=!1)}},addKnifeInGrid:function(e){var t=this._knifeHCList.indexOf("0");if(t<0)return t;var i=this.gridLayoutNode.children[t].getChildByName("knifeItemHC");i||(i=cc.instantiate(this.knifeItemHCPrefab),this.gridLayoutNode.children[t].addChild(i),i.getComponent("KnifeHC").initKnifeHC(e)),i.active=!0,i.getComponent("KnifeHC").setKnifeData(e,this.profileManager.knifeItemSpriteFrame[e-1]),this._knifeHCList[t]=String(e)},buyKnifeInShop:function(e,t,i){var n=this._knifeHCList.indexOf("0")>=0,r=!1;if("stone"==e?r=Number(this.profileManager._Stone)>t:"coin"==e?r=Number(this.profileManager._CoinsHC)>t:"ad"==e&&(r=!0),r&&n){if(this.addKnifeInGrid(i)<0)console.log("buy fail, no more position");else if("coin"==e?this.profileManager._CoinsHC=o.numMinus(this.profileManager._CoinsHC,""+t):"stone"==e&&(this.profileManager._Stone=o.numMinus(this.profileManager._Stone,""+t)),this.profileManager.boughtKnifeCount=o.numAdd(this.profileManager.boughtKnifeCount,"1"),this.updateBuyData(this.profileManager.boughtKnifeCount),this.pendingKnifeData={displayKnifeLv:this.profileManager.displayKnife.level,hcKnifeLv:this._knifeHCList.join(",")},this.calProduction(),this.showHintOverlay("\u606d\u559c\u83b7\u5f97\u65b0\u7684\u98de\u5200",this.node.getChildByName("content"),!1),"ad"==e){var s=this;a.updateAdBuyTime({openId:this.profileManager.openId},function(e){s.profileManager.last_buy_by_ad=JSON.parse(e).last_buy_by_ad,s.updateShopHint()},function(e){console.log("updateAdBuyTime error res:",e)})}}else r||("coin"==e?this.showCoinsNotEnoughDialog():"stone"==e&&this.showHintOverlay("\u94bb\u77f3\u4e0d\u591f\u4e86",this.node.getChildByName("content"),!1)),n||this.showHint("\u6ca1\u6709\u7a7a\u4f4d\u7f6e\u4e86\u5462",this.node.getChildByName("content"),!1)},buyKnife:function(){var e=Number(this.profileManager._CoinsHC)>this.currentBuyResult.price,t=this._knifeHCList.indexOf("0")>=0;e&&t?this.addKnifeInGrid(this.currentBuyResult.lv)<0?console.log("buy fail, no more position"):(this.profileManager._CoinsHC=o.numMinus(this.profileManager._CoinsHC,""+this.currentBuyResult.price),this.coinsLabel.string=o.formatNum(this.profileManager._CoinsHC),this.profileManager.boughtKnifeCount=o.numAdd(this.profileManager.boughtKnifeCount,"1"),this.updateBuyData(this.profileManager.boughtKnifeCount),this.pendingKnifeData={displayKnifeLv:this.profileManager.displayKnife.level,hcKnifeLv:this._knifeHCList.join(",")},this.calProduction()):(e||this.showCoinsNotEnoughDialog(),t||this.showHint("\u6ca1\u6709\u7a7a\u4f4d\u7f6e\u4e86\u5462",this.buyPriceLabel.node.parent.parent,!1))},syncCoinsAndKnifes:function(){a.updateHCCoinsAndCount({openId:this.profileManager.openId,coinsHC:this.profileManager._CoinsHC,stone:this.profileManager._Stone,boughtKnifeCount:this.profileManager.boughtKnifeCount},function(e){},function(e){console.log("updateHCCoinsAndCount fail")}),this.pendingKnifeData&&(a.updateHCKnifes({openId:this.profileManager.openId,displayKnifeLv:this.pendingKnifeData.displayKnifeLv,hcKnifeLv:this.pendingKnifeData.hcKnifeLv},function(e){console.log("updateHCKnifes success")},function(e){console.log("updateHCKnifes fail")}),this.pendingKnifeData=null)},calProduction:function(){for(var e=0,t=0,i=this._knifeHCList.length;t<i;t++){var n=Number(this._knifeHCList[t]);e+=o.getProduction(n)}return this.profileManager.displayKnife&&(e+=2*o.getProduction(this.profileManager.displayKnife.level)),this.profileManager._accSpeedTime>0?this.profileManager._incCoins=5*e:this.profileManager._incCoins=e,this.profileManager._incCoins},getTotalProduction:function(){for(var e=0,t=0,i=this._knifeHCList.length;t<i;t++){var n=Number(this._knifeHCList[t]);e+=o.getProduction(n)}return this.profileManager.displayKnife&&(e+=2*o.getProduction(this.profileManager.displayKnife.level)),e},showHint:function(e,t,i){var n=null;(n=i?cc.instantiate(this.hintPrefabSmall):cc.instantiate(this.hintPrefabBigger)).parent=t,n.zIndex=101,n.getComponent(cc.Label).string=e;var a=cc.callFunc(function(){this.destroy()},n),o=cc.spawn(cc.moveBy(2,new cc.Vec2(0,200)),cc.fadeOut(2));o.easing(cc.easeQuarticActionOut());var r=cc.sequence(o,cc.moveBy(.1,new cc.Vec2(0,-200)),a);n.runAction(r)},showHintOverlay:function(e,t,i){var n=null;(n=i?cc.instantiate(this.hintPrefabSmall):cc.instantiate(this.hintPrefabBigger)).parent=t,n.zIndex=101,n.getComponent(cc.Label).string=e;var a=cc.callFunc(function(){this.destroy()},n),o=cc.spawn(cc.moveBy(2,new cc.Vec2(0,200)),cc.fadeIn(1));o.easing(cc.easeQuarticActionOut());var r=cc.sequence(o,cc.moveBy(1,new cc.Vec2(0,1)),cc.fadeOut(.5),a);n.runAction(r)},start:function(){this.node.on("onSoundToggled",function(e){}.bind(this))},toggleSound:function(){try{var e=wx.getStorageSync("sound");e?e=(parseInt(e)+1)%2:(wx.setStorageSync("sound",1),e=1),wx.setStorageSync("sound",e),this.profileManager._sound=e}catch(e){}},clickPlay:function(){cc.director.loadScene("game/game")},clickShop:function(){var e=this.getMaxLv();this.shopDialog.getComponent("ShopListManager").loadData(e),r.runDialogAnim(this.shopDialog)},closeShopDialog:function(){this.shopDialog.active=!1},clickRank:function(e,t){if(this.profileManager.userInfo){if("undefined"!=typeof wx&&!this.rankDialogNode.active){this.rankDialogNode.active=!0;var i=this.rankDialogNode.getComponent("Rank");void 0===t?i.getData():i.getData(e,t)}}else this.showLoginDialog(3)},clickAccSpeed:function(){if(0==this.profileManager._accSpeedTime){var e=this;r.showVideoAd("7bca4140b6d21575bd98580ac143e5d6",function(){e.profileManager._accSpeedTime=200,e.profileManager.scheduleAccSpeed(),e.accSpeedDialogNode.active=!1},function(){e.showNetworkDialog()})}},showAccSpeedDialog:function(){0==this.profileManager._accSpeedTime?1==this.profileManager._isFirstTime&&0==this.profileManager._freeAccSpeedUsed?(this.profileManager._freeAccSpeedUsed=!0,this.profileManager._accSpeedTime=30,this.profileManager.scheduleAccSpeed()):r.runDialogAnim(this.accSpeedDialogNode):this.showHint("\u6b63\u5728\u52a0\u901f",this.accSpeedLabel.node,!0)},closeAccSpeedDialog:function(){this.accSpeedDialogNode.active=!1},showNetworkDialog:function(){r.runDialogAnim(this.networkDialog)},closeNetworkDialog:function(){this.networkDialog.active=!1},clickGift:function(){this.profileManager.userInfo?this.profileManager.stoneGetLeftCount>0?(this.stoneGetLeftCountLabel.string=String(this.profileManager.stoneGetLeftCount),r.runDialogAnim(this.stoneDialogNode)):this.showHint("\u4eca\u65e5\u5df2\u9886\u5b8c\uff0c\u660e\u65e5\u518d\u9886",this.giftManagerNode.getChildByName("gift_label"),!0):this.showLoginDialog(3)},closeGiftDialog:function(){this.stoneDialogNode.active=!1},clickGiftAd:function(){var e=this;this.profileManager.stoneGetLeftCount>0&&r.showVideoAd("157d5693508fdb97a469e5aaf7e8992c",function(){e.giftManagerNode.getComponent("GiftManager").clickGift(),e.stoneDialogNode.active=!1},function(){e.showNetworkDialog()})},clickBin:function(){this.showHintOverlay("\u62d6\u52a8\u98de\u5200\u5230\u6b64\u56de\u6536",this.binBtmSprite.node.getChildByName("bin_label"),!0)},clickGridAd:function(){r.showGridAd()},initGetUserInfoButton:function(){this.updateUserInfoIfNeeded()},showLoginDialog:function(e){switch(e){case 1:this.loginDescText.string="\u4f60\u51c6\u5907\u597d\u8fdb\u5165\u7cbe\u5f69\u7684\u98de\u5200\u4e16\u754c\u4e86\u5417\uff1f";break;default:this.loginDescText.string="\u8be5\u529f\u80fd\u9700\u8981\u767b\u5f55\u6388\u6743"}r.runDialogAnim(this.loginDialog);var t=this.loginBtn.convertToWorldSpaceAR(cc.v2(-this.loginBtn.width/2,this.loginBtn.height/2)),i=cc.view.getFrameSize();console.log("screenSize.width:",i.width,"screenSize.height:",i.height);var n=cc.view.getDesignResolutionSize();console.log("desingSize.width:",n.width,"desingSize.height:",n.height),console.log("position.x:",t.x,"position.y:",t.y);var a=i.width/n.width,o=i.height/n.height,s=(this.loginBtn.width,this.loginBtn.height,t.x,n.height,t.y,this.loginBtn.height,cc.size(this.loginBtn.width+10,this.loginBtn.height+10)),c=cc.view.getFrameSize(),l=cc.director.getWinSize(),h=(.5*l.width+this.loginBtn.x-.5*s.width)/l.width*c.width,d=(.5*l.height-this.loginBtn.y-.5*s.height)/l.height*c.height,p=s.width/l.width*c.width,g=s.height/l.height*c.height;this.createUserInfoButton(h,d,p,g)},createUserInfoButton:function(e,t,i,n){var a=this,o=this;this.loginButton=wx.createUserInfoButton({type:"image",image:baseURL+"res/Texture/login_btn.png",style:{left:e,top:t,width:i,height:n,lineHeight:40,backgroundColor:"#ffff0000",color:"#ffffff",textAlign:"center",fontSize:16,borderRadius:4}}),this.loginButton.onTap(function(e){e.userInfo?(o.profileManager.userInfo=e.userInfo,o.profileManager._isFirstTime=!0,o.updateUserInfoIfNeeded(),o.pandingShowAndInitGuide=o.showAndInitGuide):cc.director.loadScene("loading/Loading"),a.loginButton.destroy(),a.loginDialog.active=!1})},showAndInitGuide:function(){var e=-1,t=-1,i=this;if(this._knifeHCList.every(function(n,a){return 0==n||i._knifeHCList.indexOf(n)==i._knifeHCList.lastIndexOf(n)||(e=i._knifeHCList.indexOf(n),t=i._knifeHCList.lastIndexOf(n),!1)}),-1!=e){var n=this.gridLayoutNode.children[e],a=this.gridLayoutNode.children[t],o=this.roundBtnBg.node;this.guideNode.getComponent("Guide").initAndStart(n,a,o)}},hideLoginDialog:function(){this.loginDialog.active=!1,this.loginButton.destroy()},login:function(){apiBaseUrl;this.updateUserInfoIfNeeded()},updateUserInfoIfNeeded:function(){this.getProfileInfos.bind(this)()},getProfileInfos:function(){this.profileManager._Stone=0,this.profileManager.boughtKnifeCount=3,this.profileManager.offlineTime=0,this.profileManager.stoneGetLeftCount=0,console.log("stoneGetLeftCount:",this.profileManager.stoneGetLeftCount),this.profileManager.last_buy_by_ad=0,this.updateShopHint(),this.profileManager.last_get_gift_time=0,this.profileManager.hightestScore=0,this.profileManager.hightestLevel=0,this.profileManager.hightestCreatedKnife=0,this.profileManager.hightestCreatedTime=0,this.profileManager.knifeCount=0,this.profileManager.currentKnifeId=0,this.coinsLabel.string=o.formatNum(this.profileManager._CoinsHC),cc.find("content/bottombar/gift",this.node).getComponent("GiftManager").updateState();this.profileManager.shareTicket,this.profileManager.isScoreRank;this.profileManager.startCoinsProduction(),this.getHCKnifesInfo()},updateShopHint:function(){null==this.profileManager.last_buy_by_ad||(new Date).getTime()-this.profileManager.last_buy_by_ad>288e5?(this.shopHintNode.active=!0,this.profileManager.canAdBuy=!0):(this.shopHintNode.active=!1,this.profileManager.canAdBuy=!1)},getHCKnifesInfo:function(){this.profileManager.displayKnife=new n.default(1),this.profileManager.displayKnife.icon=this.profileManager.knifeItemSpriteFrame[this.profileManager.displayKnife.level-1],this.pandingShowAndInitGuide&&this.pandingShowAndInitGuide();var e=this.calProduction(),t=7200;this.profileManager.offlineTime<7200&&(t=this.profileManager.offlineTime),this.offlineCoins=e*t,1!=this.profileManager._isFirstTime&&this.offlineCoins>0&&1==this.profileManager._offlineFlag&&this.showOfflineDialog(),this.updateDisplayKnife(),this.updateBuyData(this.profileManager.boughtKnifeCount),this.hideLoading(),this.profileManager.scheduleAutoMerge(this.autoMerge.bind(this)),this.profileManager.scheduleAccSpeed()},showOfflineDialog:function(){r.runDialogAnim(this.offlineDialogNode),this.offlineCoinsLabel.string=o.formatNum(String(this.offlineCoins)),this.profileManager._offlineFlag=!1},showLoading:function(){this.loadingNode.active=!0},hideLoading:function(){this.loadingNode.active=!1},getOfflineCoins:function(){this.profileManager._CoinsHC=o.numAdd(this.profileManager._CoinsHC,String(this.offlineCoins)),this.offlineCoins=0,this.offlineDialogNode.active=!1},getTripleOfflineCoins:function(){var e=this;r.showVideoAd("c89a048ece14f172fc249722770c645c",function(){e.profileManager._CoinsHC=o.numAdd(e.profileManager._CoinsHC,String(3*e.offlineCoins)),e.offlineCoins=0,e.offlineDialogNode.active=!1},function(){e.showNetworkDialog()})},showCoinsNotEnoughDialog:function(){var e=this.getMaxLv();this.coinsByAd=6*o.getMaxLvPrice(this.profileManager.boughtKnifeCount,e),r.runDialogAnim(this.coinsNotEnoughDialogNode),this.coinsNotEnoughCoinsLabel.string=o.formatNum(String(this.coinsByAd))},closeCoinsNotEnoughDialog:function(){this.coinsNotEnoughDialogNode.active=!1},getCoinsByAd:function(){var e=this;r.showVideoAd("1352de4477ced958b632cd612fe383ff",function(){e.profileManager._CoinsHC=o.numAdd(e.profileManager._CoinsHC,String(e.coinsByAd)),e.coinsNotEnoughDialogNode.active=!1},function(){e.showNetworkDialog()})},clickAutoMerge:function(){if(0==this.profileManager._autoMergeTime)if(1==this.profileManager._isFirstTime&&0==this.profileManager._freeAutoMergeUsed)this.profileManager._freeAutoMergeUsed=!0,this.profileManager._autoMergeTime=30,this.profileManager.scheduleAutoMerge(this.autoMerge.bind(this));else{var e=this;r.showVideoAd("436a8be32d9bd74f1f2c2db7ee6474a9",function(){console.log("auto merge ad done"),e.profileManager._autoMergeTime=180,e.profileManager.scheduleAutoMerge(e.autoMerge.bind(e))},function(){e.showNetworkDialog()})}else this.showHint("\u6b63\u5728\u81ea\u52a8\u5408\u5e76",this.autoMergelabel.node.parent,!0)},autoMerge:function(){if(this.displayKnifeSprite){var e=this.displayKnifeSprite.node.parent.parent,t=this;if(this.profileManager._autoMergeTime>0){for(var i=-1,n=-1,a=1;a<=50&&(i=this._knifeHCList.indexOf(String(a)),n=this._knifeHCList.lastIndexOf(String(a)),i==n);a++);if(-1!=i&&-1!=n&&i!=n){var o=this.gridLayoutNode.children[i].getChildByName("knifeItemHC"),r=this.gridLayoutNode.children[n].getChildByName("knifeItemHC"),s=o.getChildByName("knife"),c=cc.instantiate(s);c.setParent(e),c.position=c.parent.convertToNodeSpaceAR(s.convertToWorldSpaceAR(cc.Vec2.ZERO)),c.zIndex=99,s.opacity=100;var l=r.convertToWorldSpaceAR(cc.Vec2.ZERO),h=c.parent.convertToNodeSpaceAR(l);cc.tween(c).to(.3,{position:h},{easing:"sineInOut"}).call(function(){cc.tween(r.getChildByName("knife")).to(.1,{scale:1.5}).to(.1,{scale:1}).start(),c.destroy(),t._combWeapen(n,i),s.opacity=255}).start()}}}},updateBuyData:function(e){if(e){var t=this.getMaxLv(),i=this.getTotalProduction();this.shopDialog.getComponent("ShopListManager").totalProduction=i,this.currentBuyResult=o.getCurrentPriceByProduction(i,t),this.buyPriceLabel.string=o.formatNum(""+this.currentBuyResult.price),this.buyLvLabel.string="Lv"+this.currentBuyResult.lv}},_swapDisplay:function(e,t){var i=-1;if(e<0&&t<0)return-1;if(!(t<this._knifeHCList.length&&e<this._knifeHCList.length))return console.log("\u9519\u8bef\u7684\u6b66\u5668\u8282\u70b9\u7f16\u53f7\uff1a",t),-1;var n=1;if((n=-1==e?this.profileManager.displayKnife.level:Number(this._knifeHCList[e]))<0||n>50)return console.log("moveLv\u975e\u6cd5\uff0c\u6216\u8d85\u8fc7\u6700\u5927\u7b49\u7ea7\uff0c\u4e0d\u53ef\u66ff\u6362"),n>50&&this.showHintOverlay("\u98de\u5200\u7b49\u7ea7\u5df2\u8fbe\u5230\u6700\u5927",this.node.getChildByName("content"),!1),-1;var a=1;if((a=-1==t?this.profileManager.displayKnife.level:Number(this._knifeHCList[t]))<0||a>50)return console.log("targetLv\u975e\u6cd5\uff0c\u6216\u8d85\u8fc7\u6700\u5927\u7b49\u7ea7\uff0c\u4e0d\u53ef\u66ff\u6362"),a>50&&this.showHintOverlay("\u98de\u5200\u7b49\u7ea7\u5df2\u8fbe\u5230\u6700\u5927",this.node.getChildByName("content"),!1),-1;if(n==a){if(a<0||a>=50)return a>=50&&this.showHintOverlay("\u98de\u5200\u7b49\u7ea7\u5df2\u8fbe\u5230\u6700\u5927",this.node.getChildByName("content"),!1),-1;var o=n+1;-1==e?(this._knifeHCList[t]=String(o),this.setKnifeLevel(t,o),this.profileManager.displayKnife.setLevel(0)):-1==t&&(this._knifeHCList[e]=String(0),this.setKnifeLevel(e,0),this.profileManager.displayKnife.setLevel(o)),i=1}else-1==e?(this._knifeHCList[t]=String(n),this.setKnifeLevel(t,n),this.profileManager.displayKnife.setLevel(a)):-1==t&&(this._knifeHCList[e]=String(a),this.setKnifeLevel(e,a),this.profileManager.displayKnife.setLevel(n)),i=0==n||0==a?-1:0;return this.updateDisplayKnife(),this.pendingKnifeData={displayKnifeLv:this.profileManager.displayKnife.level,hcKnifeLv:this._knifeHCList.join(",")},this.calProduction(),1==this.guideNode.getComponent("Guide").inUse&&(this.guideNode.getComponent("Guide").stepDone(),this.guideNode.getComponent("Guide").stepNext()),i},runSwapAnim:function(e,t,i){var n=cc.instantiate(e);n.parent=i,e.active=!1,n.position=n.parent.convertToNodeSpaceAR(e.convertToWorldSpaceAR(cc.Vec2.ZERO)),n.zIndex=99;var a=n.position,o=cc.instantiate(t);o.parent=i,t.active=!1,o.position=o.parent.convertToNodeSpaceAR(t.convertToWorldSpaceAR(cc.Vec2.ZERO)),o.zIndex=99;var r=o.position;cc.tween(n).to(.2,{position:r},{easing:"sineInOut"}).call(function(){n.destroy(),e.active=!0,cc.tween(e).to(.1,{scale:1.5}).to(.1,{scale:1}).start()}).start(),cc.tween(o).to(.2,{position:a},{easing:"sineInOut"}).call(function(){o.destroy(),t.active=!0,cc.tween(t).to(.1,{scale:1.5}).to(.1,{scale:1}).start()}).start()},updateDisplayKnife:function(){this.speedProgressBar.maxDistance=n.default.MAX_SPEED,this.harmProgressBar.maxDistance=n.default.MAX_HARM,this.profileManager.displayKnife&&0!=this.profileManager.displayKnife.level?(this.displayKnifeSprite.node.active=!0,this.displayKnifeLabel.node.parent.active=!0,this.profileManager.displayKnife.icon=this.profileManager.knifeItemSpriteFrame[this.profileManager.displayKnife.level-1],this.displayKnifeSprite.spriteFrame=this.profileManager.displayKnife.icon,this.displayKnifeSprite.node.width=73,this.displayKnifeSprite.node.height=332,this.speedProgressBar.progress=this.profileManager.displayKnife.speed/n.default.MAX_SPEED,this.harmProgressBar.progress=this.profileManager.displayKnife.harm/n.default.MAX_HARM,this.speedLabel.string=String(this.profileManager.displayKnife.speed),this.harmLabel.string=String(this.profileManager.displayKnife.harm),this.displayKnifeLabel.string=String(this.profileManager.displayKnife.level)):(this.displayKnifeSprite.node.active=!1,this.displayKnifeLabel.node.parent.active=!1,this.speedProgressBar.progress=0,this.harmProgressBar.progress=0,this.speedLabel.string="0",this.harmLabel.string="0")},_combWeapen:function(e,t){var i=-1;if(!(e>=0&&t>=0&&e<this._knifeHCList.length&&t<this._knifeHCList.length))return console.log("\u9519\u8bef\u7684\u6b66\u5668\u8282\u70b9\u7f16\u53f7\uff1a",e),-1;var n=Number(this._knifeHCList[e]),a=Number(this._knifeHCList[t]);if(n!=a){if(a<0||a>50)return console.log("\u975e\u6cd5\u53c2\u6570"),a>50&&this.showHintOverlay("\u98de\u5200\u7b49\u7ea7\u5df2\u8fbe\u5230\u6700\u5927",this.node.getChildByName("content"),!1),-1;this._knifeHCList[e]=String(a),this._knifeHCList[t]=String(n),this.setKnifeLevel(e,a),this.setKnifeLevel(t,n),i=0==n||0==a?-1:0}else{if(a<0||a>=50)return console.log("\u975e\u6cd5\u53c2\u6570\uff0c\u6216\u6700\u5927\u7b49\u7ea7\uff0c\u4e0d\u53ef\u518d\u5408\u6210"),a>=50&&this.showHintOverlay("\u98de\u5200\u7b49\u7ea7\u5df2\u8fbe\u5230\u6700\u5927",this.node.getChildByName("content"),!1),-1;var o=a+1;this._knifeHCList[e]=String(o),this._knifeHCList[t]=String(0),this.setKnifeLevel(e,o),this.setKnifeLevel(t,0),i=1}if(this.pendingKnifeData={displayKnifeLv:this.profileManager.displayKnife.level,hcKnifeLv:this._knifeHCList.join(",")},this.calProduction(),1==this.guideNode.getComponent("Guide").inUse){this.guideNode.getComponent("Guide").stepDone();for(var r,s=0,c=-1,l=0,h=this._knifeHCList.length;l<h;l++)Number(this._knifeHCList[l])>s&&(s=Number(this._knifeHCList[l]),c=l);r=this.gridLayoutNode.children[c],this.guideNode.getComponent("Guide").startDragNode=r,this.guideNode.getComponent("Guide").stepNext()}return i},setKnifeLevel:function(e,t){var i=this.gridLayoutNode.children[e].getChildByName("knifeItemHC");if(t>0){if(!i)(i=cc.instantiate(this.knifeItemHCPrefab)).parent=this.gridLayoutNode.children[e],i.getComponent("KnifeHC").initKnifeHC(1);i.active=!0,i.getComponent("KnifeHC").setKnifeData(t,this.profileManager.knifeItemSpriteFrame[t-1])}else i&&(i.active=!1)},_updateGridState:function(e){for(var t=0,i=this._knifeHCList.length;t<i;t++){var n=this.gridLayoutNode.children[t].getChildByName("knifeItemHC");if(n){var a=n.getChildByName("mask"),o=n.getChildByName("knife").getComponent(cc.Animation),r=Number(this._knifeHCList[t]);0==r?a.active=!1:r==e?(a.active=!1,o.enabled=!0):a.active=!0}}},_restoreGridState:function(){for(var e=0,t=this._knifeHCList.length;e<t;e++){var i=this.gridLayoutNode.children[e].getChildByName("knifeItemHC");if(i){var n=i.getChildByName("mask"),a=i.getChildByName("knife").getComponent(cc.Animation);n.active=!1,a.enabled=!1}}},_confrimRecoveryWp:function(e){for(var t=0,i=0,n=this._knifeHCList.length;i<n;i++)"0"!=this._knifeHCList[i]&&t++;if(-1==e){if(t>5){this.profileManager.displayKnife.level;this.profileManager.displayKnife.setLevel(0);var a=this.getMaxLv(),r=String(o.getMinPrice(this.profileManager.boughtKnifeCount,a));return this.profileManager._CoinsHC=o.numAdd(this.profileManager._CoinsHC,r),this.playCoinsBinPlistAnim(),this.updateDisplayKnife(),this.pendingKnifeData={displayKnifeLv:this.profileManager.displayKnife.level,hcKnifeLv:this._knifeHCList.join(",")},this.calProduction(),!0}this.showHint("\u98de\u5200\u6570\u91cf\u4e0d\u80fd\u5c0f\u4e8e5\u628a",this.node.getChildByName("content"),!1)}else{if(t>5){Number(this._knifeHCList[e]);this._knifeHCList[e]="0";var s=this.getMaxLv(),c=String(o.getMinPrice(this.profileManager.boughtKnifeCount,s));return this.profileManager._CoinsHC=o.numAdd(this.profileManager._CoinsHC,c),this.setKnifeLevel(e,0),this.playCoinsBinPlistAnim(),this.pendingKnifeData={displayKnifeLv:this.profileManager.displayKnife.level,hcKnifeLv:this._knifeHCList.join(",")},this.calProduction(),!0}this.showHint("\u98de\u5200\u6570\u91cf\u4e0d\u80fd\u5c0f\u4e8e5\u628a",this.node.getChildByName("content"),!1)}return!1},playCoinsBinPlistAnim:function(){this.binPlist.node.zIndex=101,this.binPlist.resetSystem()},convertDateForIos:function(e){var t=e.split(/[- :]/);return e=new Date(t[0],t[1]-1,t[2],t[3],t[4],t[5])},secondToTimeStr:function(e){var t=e%60,i=parseInt(e/60)%60,n=parseInt(e/60/60);return(n>9?n:"0"+n)+":"+(i>9?i:"0"+i)+":"+(t>9?t:"0"+t)},updateAccSpeedLabel:function(){this.profileManager._accSpeedTime>0?this.accSpeedLabel.string=this.secondToTimeStr(this.profileManager._accSpeedTime):this.accSpeedLabel.string="5\u500d\u52a0\u901f"},update:function(e){this.coinsLabel.string=o.formatNum(this.profileManager._CoinsHC),this.stoneLabel.string=o.formatNum(String(this.profileManager._Stone)),this.profileManager._accSpeedTime>0?this.coinSpeedLabel.string=o.formatNum(String(5*this.profileManager._incCoins))+"/\u79d2":this.coinSpeedLabel.string=o.formatNum(String(this.profileManager._incCoins))+"/\u79d2",this.autoMergelabel.string=this.secondToTimeStr(this.profileManager._autoMergeTime),this.updateAccSpeedLabel()},getMaxLv:function(){var e=0;this.profileManager.displayKnife&&(e=this.profileManager.displayKnife.level);for(var t=0,i=this._knifeHCList.length;t<i;t++)Number(this._knifeHCList[t])>e&&(e=Number(this._knifeHCList[t]));return e}}),cc._RF.pop()},{"../../Script/KnifeHCItem":"KnifeHCItem","../../Script/http/HttpUtil":"HttpUtil","../../Script/util/BigNumUtil":"BigNumUtil","../../Script/util/CommonUtil":"CommonUtil"}],knife:[function(e,t,i){"use strict";cc._RF.push(t,"c0dc63uTiVF24vMAUBpnNCx","knife");var n=function(e){return e&&e.__esModule?e:{default:e}}(e("../Script/BaseCircleChild"));e("../Script/http/HttpUtil");var a=e("../Script/util/BigNumUtil");cc.Class({extends:n.default,properties:{audioSpike:{type:cc.AudioSource,default:null},appleAnimPrefab:cc.Prefab,notLoginAnimPrefab:cc.Prefab,hintPrefabSmall:cc.Prefab,hintPrefabBigger:cc.Prefab},onLoad:function(){this._super(),this.profileManager=cc.find("ProfileManager").getComponent("ProfileManager")},start:function(){},onCollisionEnter:function(e,t){var i=this;if("UsedKnife"!==e.node.group&&"PresetKnife"!==e.node.group||"Knife"!==this.node.group){if("Apple"===e.node.group&&"Knife"===this.node.group&&12==t.tag){this.profileManager._sound;var n=e.getComponent("Apple").coinValue;if(console.log("complete coinValue:",n),this.profileManager.userInfo)this.addCoins(n);else{var o=cc.instantiate(this.notLoginAnimPrefab);o.parent=e.node.parent.parent,o.position=o.parent.convertToNodeSpaceAR(e.node.convertToWorldSpaceAR(new cc.Vec2(0,0)));var r=cc.callFunc(function(){this.destroy()},o),s=cc.spawn(cc.moveBy(2.5,cc.Vec2(0,200)),cc.fadeOut(2.5));s.easing(cc.easeQuarticActionOut());var c=cc.sequence(s,cc.moveBy(.1,cc.Vec2(0,-200)),r);o.runAction(c)}var l=cc.instantiate(this.appleAnimPrefab);l.parent=e.node.parent.parent,l.position=l.parent.convertToNodeSpaceAR(e.node.convertToWorldSpaceAR(new cc.Vec2(0,0)));var h=Math.round(.2*a.getMaxLvPrice(this.profileManager.boughtKnifeCount,this.profileManager.displayKnife.level));this.showHint("+"+a.formatNum(String(h)),e.node.parent.parent,l.position,!1),e.node.destroy();for(var d=l.children,p=0;p<d.length;++p)d[p].getComponent("BaseCircleChild").isBreakAnimPlaying=!0;this.scheduleOnce(function(){l.destroy()},1)}}else{console.log("onCollisionEnter"),1==this.profileManager._sound&&this.audioSpike.play(),this.node.stopAllActions();var g=this.node.getComponent(cc.Animation);g.on("finished",function(){var e=new cc.Event.EventCustom("onGameOver",!0);i.node.dispatchEvent(e),i.node.removeFromParent(!0)}),g.play(),this.node.group="default"}},animationEventHandler:function(e){e.destroy()},addCoins:function(e){var t=Math.round(.2*a.getMaxLvPrice(this.profileManager.boughtKnifeCount,this.profileManager.displayKnife.level));this.profileManager._CoinsHC=a.numAdd(this.profileManager._CoinsHC,String(t));var i=new cc.Event.EventCustom("onCoinAdd",!0);i.setUserData(e),this.node.dispatchEvent(i)},showHint:function(e,t,i,n){var a=null;(a=n?cc.instantiate(this.hintPrefabSmall):cc.instantiate(this.hintPrefabBigger)).parent=t,a.zIndex=101,a.position=i,a.getComponent(cc.Label).string=e;var o=cc.callFunc(function(){this.destroy()},a),r=cc.spawn(cc.moveBy(2,new cc.Vec2(0,200)),cc.fadeOut(2));r.easing(cc.easeQuarticActionOut());var s=cc.sequence(r,cc.moveBy(.1,new cc.Vec2(0,-200)),o);a.runAction(s)}}),cc._RF.pop()},{"../Script/BaseCircleChild":"BaseCircleChild","../Script/http/HttpUtil":"HttpUtil","../Script/util/BigNumUtil":"BigNumUtil"}],"use_v2.0.x_cc.Toggle_event":[function(e,t,i){"use strict";cc._RF.push(t,"a592fQymmtDMZibov4D/FlK","use_v2.0.x_cc.Toggle_event"),cc.Toggle&&(cc.Toggle._triggerEventInScript_check=!0),cc._RF.pop()},{}]},{},["Apple","GiftManager","knife","Game","GameOver","hecheng","ResLoading","AppleBreakAnim","BaseCircleChild","BreakAnim","Circle","Continue","Fire","Guide","KnifeHC","KnifeHCItem","KnifeMove","BackgroundAdapter","CloseToBorderComponent","ContentAdapter","MultiResoultionCompat","ProfileManager","Rank","ResManager","ShopItem","ShopListManager","Trunk","HttpUtil","BigNumUtil","CommonUtil","CryptoJS","aesutil","use_v2.0.x_cc.Toggle_event"]);